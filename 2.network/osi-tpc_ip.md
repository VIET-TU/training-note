# OSI ?

![alt text](./images/image-5.png)
![alt text](./images/image-6.png)

- MÃ´ hÃ¬nh OSI (Open Systems Interconnection)
- MÃ´ hÃ¬nh OSI (Open Systems Interconnection) lÃ  má»™t mÃ´ hÃ¬nh tham chiáº¿u Ä‘á»ƒ mÃ´ táº£ cÃ¡ch mÃ  cÃ¡c há»‡ thá»‘ng máº¡ng hoáº¡t Ä‘á»™ng (mÃ¡y tÃ­nh sá»­ dá»¥ng Ä‘á»ƒ giao tiáº¿p qua máº¡ng)
# Náº¯m Ä‘Æ°á»£c vai trÃ² tá»«ng layer trong cÃ¡c mÃ´ hÃ¬nh.

## Táº§ng 7 â€“ Application Layer ( Táº§ng á»©ng dá»¥ng)
- Táº§ng á»©ng dá»¥ng lÃ  lá»›p trÃªn cÃ¹ng, xÃ¡c Ä‘á»‹nh giao diá»‡n giá»¯a ngÆ°á»i sá»­ dá»¥ng vÃ  mÃ´i trÆ°á»ng OSI. Táº§ng á»©ng dá»¥ng Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi pháº§n má»m ngÆ°á»i dÃ¹ng cuá»‘i nhÆ° trÃ¬nh duyá»‡t web vÃ  á»©ng dá»¥ng email. NÃ³ cung cáº¥p cÃ¡c giao thá»©c cho phÃ©p pháº§n má»m gá»­i, nháº­n thÃ´ng tin vÃ  trÃ¬nh bÃ y dá»¯ liá»‡u cÃ³ Ã½ nghÄ©a cho ngÆ°á»i dÃ¹ng.

====
- ÄÃ¢y lÃ  táº§ng duy nháº¥t tÆ°Æ¡ng tÃ¡c trá»±c tiáº¿p vá»›i dá»¯ liá»‡u tá»« ngÆ°á»i dÃ¹ng. CÃ¡c pháº§n má»m á»©ng dá»¥ng nhÆ° web browser vÃ  email client dá»±a vÃ o Application layer Ä‘á»ƒ khá»Ÿi táº¡o giao tiáº¿p. Tuy nhiÃªn, cáº§n lÃ m rÃµ ráº±ng client software applications khÃ´ng pháº£i lÃ  má»™t pháº§n cá»§a Application layer; thay vÃ o Ä‘Ã³, Application layer chá»‹u trÃ¡ch nhiá»‡m vá» cÃ¡c protocol vÃ  xá»­ lÃ½ dá»¯ liá»‡u mÃ  pháº§n má»m sá»­ dá»¥ng Ä‘á»ƒ hiá»ƒn thá»‹ thÃ´ng tin cÃ³ Ã½ nghÄ©a cho ngÆ°á»i dÃ¹ng.

- CÃ¡c Application layer protocols bao gá»“m HTTP cÅ©ng nhÆ° SMTP (Simple Mail Transfer Protocol - má»™t trong nhá»¯ng protocols cho phÃ©p email communications).

====
- ÄÃ¢y lÃ  táº§ng trÃªn cÃ¹ng cá»§a mÃ´ hÃ¬nh OSI, Ä‘áº£m báº£o káº¿t ná»‘i giá»¯a ngÆ°á»i dÃ¹ng vÃ  há»‡ thá»‘ng. Táº§ng nÃ y Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi cÃ¡c pháº§n má»m nhÆ° trÃ¬nh duyá»‡t web hay á»©ng dá»¥ng email, cung cáº¥p cÃ¡c giao thá»©c há»— trá»£ gá»­i, nháº­n vÃ  trÃ¬nh bÃ y dá»¯ liá»‡u má»™t cÃ¡ch cÃ³ Ã½ nghÄ©a cho ngÆ°á»i dÃ¹ng cuá»‘i.

## Táº§ng 6 â€“ Presentation Layer (Táº§ng TrÃ¬nh BÃ y)
- Táº§ng nÃ y chá»§ yáº¿u chá»‹u trÃ¡ch nhiá»‡m chuáº©n bá»‹ dá»¯ liá»‡u Ä‘á»ƒ cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi Application layer; nÃ³i cÃ¡ch khÃ¡c, Layer 6 giÃºp dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘Æ°á»£c cÃ¡c á»©ng dá»¥ng tiáº¿p nháº­n. Presentation layer chá»‹u trÃ¡ch nhiá»‡m vá» translation, encryption vÃ  compression cá»§a dá»¯ liá»‡u.

===
- Táº§ng trÃ¬nh bÃ y xÃ¡c Ä‘á»‹nh cÃ¡ch hai thiáº¿t bá»‹ sáº½ mÃ£ hÃ³a vÃ  nÃ©n dá»¯ liá»‡u Ä‘á»ƒ nÃ³ Ä‘Æ°á»£c nháº­n má»™t cÃ¡ch chÃ­nh xÃ¡c á»Ÿ Ä‘áº§u bÃªn kia. Táº§ng trÃ¬nh bÃ y láº¥y báº¥t ká»³ dá»¯ liá»‡u nÃ o Ä‘Æ°á»£c truyá»n bá»Ÿi táº§ng á»©ng dá»¥ng vÃ  chuáº©n bá»‹ cho viá»‡c truyá»n qua táº§ng phiÃªn.

- Táº§ng nÃ y chá»‹u trÃ¡ch nhiá»‡m chÃ­nh trong viá»‡c chuáº©n bá»‹ dá»¯ liá»‡u Ä‘á»ƒ nÃ³ cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi táº§ng á»©ng dá»¥ng. NÃ³i cÃ¡ch khÃ¡c, táº§ng 6 lÃ m cho dá»¯ liá»‡u hiá»ƒn thá»‹ cho cÃ¡c á»©ng dá»¥ng sá»­ dá»¥ng. Táº§ng trÃ¬nh bÃ y chá»‹u trÃ¡ch nhiá»‡m dá»‹ch, mÃ£ hÃ³a vÃ  nÃ©n dá»¯ liá»‡u.

- Hai thiáº¿t bá»‹ Ä‘ang giao tiáº¿p cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng phÃ¡p mÃ£ hÃ³a khÃ¡c nhau, do Ä‘Ã³ táº§ng 6 chá»‹u trÃ¡ch nhiá»‡m dá»‹ch dá»¯ liá»‡u Ä‘áº¿n thÃ nh má»™t cÃº phÃ¡p mÃ  lá»›p á»©ng dá»¥ng cá»§a thiáº¿t bá»‹ nháº­n cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c. Náº¿u cÃ¡c thiáº¿t bá»‹ Ä‘ang giao tiáº¿p qua káº¿t ná»‘i Ä‘Æ°á»£c mÃ£ hÃ³a, táº§ng 6 chá»‹u trÃ¡ch nhiá»‡m thÃªm mÃ£ hÃ³a á»Ÿ Ä‘áº§u ngÆ°á»i gá»­i cÅ©ng nhÆ° giáº£i mÃ£ mÃ£ hÃ³a á»Ÿ Ä‘áº§u ngÆ°á»i nháº­n Ä‘á»ƒ nÃ³ cÃ³ thá»ƒ hiá»ƒn thá»‹ táº§ng á»©ng dá»¥ng vá»›i dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘á»c Ä‘Æ°á»£c, khÃ´ng Ä‘Æ°á»£c mÃ£ hÃ³a.

- Cuá»‘i cÃ¹ng, lá»›p trÃ¬nh bÃ y cÅ©ng chá»‹u trÃ¡ch nhiá»‡m nÃ©n dá»¯ liá»‡u mÃ  nÃ³ nháº­n Ä‘Æ°á»£c tá»« lá»›p á»©ng dá»¥ng trÆ°á»›c khi phÃ¢n phá»‘i Ä‘áº¿n táº§ng 5. Äiá»u nÃ y giÃºp cáº£i thiá»‡n tá»‘c Ä‘á»™ vÃ  hiá»‡u quáº£ cá»§a giao tiáº¿p báº±ng cÃ¡ch giáº£m thiá»ƒu lÆ°á»£ng dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c truyá»n.

## Táº§ng 5 â€“ Session Layer (Táº§ng phiÃªn)
- ÄÃ¢y lÃ  lá»›p chá»‹u trÃ¡ch nhiá»‡m Ä‘Ã³ng má»Ÿ giao tiáº¿p giá»¯a hai thiáº¿t bá»‹. Khoáº£ng thá»i gian tá»« khi giao tiáº¿p Ä‘Æ°á»£c má»Ÿ vÃ  Ä‘Ã³ng Ä‘Æ°á»£c gá»i lÃ  phiÃªn. Táº§ng phiÃªn Ä‘áº£m báº£o ráº±ng phiÃªn váº«n má»Ÿ Ä‘á»§ lÃ¢u Ä‘á»ƒ chuyá»ƒn táº¥t cáº£ dá»¯ liá»‡u Ä‘ang Ä‘Æ°á»£c trao Ä‘á»•i, vÃ  sau Ä‘Ã³ nhanh chÃ³ng Ä‘Ã³ng phiÃªn Ä‘á»ƒ trÃ¡nh lÃ£ng phÃ­ tÃ i nguyÃªn.
- Lá»›p phiÃªn cÅ©ng Ä‘á»“ng bá»™ hÃ³a viá»‡c truyá»n dá»¯ liá»‡u vá»›i cÃ¡c Ä‘iá»ƒm kiá»ƒm tra.

- VÃ­ dá»¥: Náº¿u má»™t tá»‡p 100 megabyte Ä‘ang Ä‘Æ°á»£c chuyá»ƒn, táº§ng phiÃªn cÃ³ thá»ƒ Ä‘áº·t má»™t Ä‘iá»ƒm kiá»ƒm tra cá»© sau 5 megabyte. Trong trÆ°á»ng há»£p ngáº¯t káº¿t ná»‘i hoáº·c gáº·p sá»± cá»‘ sau khi 52 megabyte Ä‘Ã£ Ä‘Æ°á»£c chuyá»ƒn, phiÃªn cÃ³ thá»ƒ Ä‘Æ°á»£c tiáº¿p tá»¥c tá»« Ä‘iá»ƒm kiá»ƒm tra cuá»‘i cÃ¹ng, cÃ³ nghÄ©a lÃ  chá»‰ cáº§n chuyá»ƒn thÃªm 50 megabyte dá»¯ liá»‡u. Náº¿u khÃ´ng cÃ³ cÃ¡c tráº¡m kiá»ƒm soÃ¡t, toÃ n bá»™ quÃ¡ trÃ¬nh chuyá»ƒn sáº½ pháº£i báº¯t Ä‘áº§u láº¡i tá»« Ä‘áº§u.

===

- Session layer cÅ©ng Ä‘á»“ng bá»™ hÃ³a quÃ¡ trÃ¬nh truyá»n dá»¯ liá»‡u báº±ng cÃ¡c checkpoint. VÃ­ dá»¥, náº¿u má»™t tá»‡p 100 megabyte Ä‘ang Ä‘Æ°á»£c truyá»n, Session layer cÃ³ thá»ƒ Ä‘áº·t má»™t checkpoint sau má»—i 5 megabyte. Trong trÆ°á»ng há»£p máº¥t káº¿t ná»‘i hoáº·c sá»± cá»‘ xáº£y ra sau khi Ä‘Ã£ truyá»n Ä‘Æ°á»£c 52 megabyte, phiÃªn truyá»n dá»¯ liá»‡u cÃ³ thá»ƒ Ä‘Æ°á»£c tiáº¿p tá»¥c tá»« checkpoint cuá»‘i cÃ¹ng, nghÄ©a lÃ  chá»‰ cáº§n truyá»n thÃªm 50 megabyte ná»¯a. Náº¿u khÃ´ng cÃ³ checkpoint, toÃ n bá»™ quÃ¡ trÃ¬nh truyá»n sáº½ pháº£i báº¯t Ä‘áº§u láº¡i tá»« Ä‘áº§u.

## Táº§ng 4 â€“ Transport Layer (Táº§ng Váº­n Chuyá»ƒn)

- Táº§ng 4 chá»‹u trÃ¡ch nhiá»‡m giao tiáº¿p Ä‘áº§u cuá»‘i giá»¯a hai thiáº¿t bá»‹. Äiá»u nÃ y bao gá»“m viá»‡c láº¥y dá»¯ liá»‡u tá»« lá»›p phiÃªn vÃ  chia nÃ³ thÃ nh cÃ¡c pháº§n Ä‘Æ°á»£c gá»i lÃ  phÃ¢n Ä‘oáº¡n trÆ°á»›c khi gá»­i Ä‘áº¿n táº§ng 3. Táº§ng truyá»n táº£i trÃªn thiáº¿t bá»‹ nháº­n cÃ³ trÃ¡ch nhiá»‡m táº­p há»£p láº¡i cÃ¡c phÃ¢n Ä‘oáº¡n thÃ nh dá»¯ liá»‡u mÃ  táº§ng phiÃªn cÃ³ thá»ƒ sá»­ dá»¥ng.

- Táº§ng váº­n chuyá»ƒn cÅ©ng chá»‹u trÃ¡ch nhiá»‡m kiá»ƒm soÃ¡t luá»“ng vÃ  kiá»ƒm soÃ¡t lá»—i. Kiá»ƒm soÃ¡t luá»“ng xÃ¡c Ä‘á»‹nh tá»‘c Ä‘á»™ truyá»n tá»‘i Æ°u Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng ngÆ°á»i gá»­i cÃ³ káº¿t ná»‘i nhanh khÃ´ng lÃ m ngÆ°á»i nháº­n cÃ³ káº¿t ná»‘i cháº­m bá»‹ choÃ¡ng ngá»£p. Táº§ng truyá»n táº£i thá»±c hiá»‡n kiá»ƒm soÃ¡t lá»—i á»Ÿ Ä‘áº§u nháº­n báº±ng cÃ¡ch Ä‘áº£m báº£o ráº±ng dá»¯ liá»‡u nháº­n Ä‘Æ°á»£c lÃ  hoÃ n chá»‰nh vÃ  yÃªu cáº§u truyá»n láº¡i náº¿u chÆ°a.


====

- Layer 4 chá»‹u trÃ¡ch nhiá»‡m vá» giao tiáº¿p end-to-end giá»¯a hai thiáº¿t bá»‹. Äiá»u nÃ y bao gá»“m viá»‡c láº¥y dá»¯ liá»‡u tá»« Session layer vÃ  chia nhá» thÃ nh cÃ¡c pháº§n gá»i lÃ  segment trÆ°á»›c khi gá»­i xuá»‘ng Layer 3. Transport layer trÃªn thiáº¿t bá»‹ nháº­n sáº½ chá»‹u trÃ¡ch nhiá»‡m táº­p há»£p láº¡i cÃ¡c segment thÃ nh dá»¯ liá»‡u mÃ  Session layer cÃ³ thá»ƒ sá»­ dá»¥ng.

- Transport layer cÅ©ng Ä‘áº£m nhiá»‡m flow control vÃ  error control. Flow control xÃ¡c Ä‘á»‹nh tá»‘c Ä‘á»™ truyá»n tá»‘i Æ°u Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng má»™t sender cÃ³ káº¿t ná»‘i nhanh khÃ´ng lÃ m quÃ¡ táº£i má»™t receiver cÃ³ káº¿t ná»‘i cháº­m. Transport layer thá»±c hiá»‡n error control á»Ÿ phÃ­a nháº­n báº±ng cÃ¡ch Ä‘áº£m báº£o dá»¯ liá»‡u nháº­n Ä‘Æ°á»£c lÃ  Ä‘áº§y Ä‘á»§ vÃ  yÃªu cáº§u truyá»n láº¡i náº¿u dá»¯ liá»‡u bá»‹ thiáº¿u.

- CÃ¡c Transport layer protocols bao gá»“m Transmission Control Protocol (TCP) vÃ  User Datagram Protocol (UDP).

## Táº§ng 3 â€“ Network Layer (Táº§ng Máº¡ng)

- Táº§ng máº¡ng cÃ³ nhiá»‡m vá»¥ táº¡o Ä‘iá»u kiá»‡n thuáº­n lá»£i cho viá»‡c truyá»n dá»¯ liá»‡u giá»¯a hai máº¡ng khÃ¡c nhau. Náº¿u hai thiáº¿t bá»‹ giao tiáº¿p trÃªn cÃ¹ng má»™t máº¡ng, thÃ¬ táº§ng máº¡ng lÃ  khÃ´ng cáº§n thiáº¿t. Táº§ng máº¡ng chia nhá» cÃ¡c phÃ¢n Ä‘oáº¡n tá»« lá»›p truyá»n táº£i thÃ nh cÃ¡c Ä‘Æ¡n vá»‹ nhá» hÆ¡n, Ä‘Æ°á»£c gá»i lÃ  gÃ³i, trÃªn thiáº¿t bá»‹ cá»§a ngÆ°á»i gá»­i vÃ  táº­p há»£p láº¡i cÃ¡c gÃ³i nÃ y trÃªn thiáº¿t bá»‹ nháº­n. Táº§ng máº¡ng cÅ©ng tÃ¬m ra con Ä‘Æ°á»ng váº­t lÃ½ tá»‘t nháº¥t Ä‘á»ƒ dá»¯ liá»‡u Ä‘áº¿n Ä‘Ã­ch cá»§a nÃ³; Ä‘iá»u nÃ y Ä‘Æ°á»£c gá»i lÃ  Ä‘á»‹nh tuyáº¿n.

====
- Network layer chá»‹u trÃ¡ch nhiá»‡m há»— trá»£ viá»‡c truyá»n dá»¯ liá»‡u giá»¯a hai máº¡ng khÃ¡c nhau. Náº¿u hai thiáº¿t bá»‹ giao tiáº¿p náº±m trong cÃ¹ng má»™t máº¡ng, thÃ¬ Network layer khÃ´ng cáº§n thiáº¿t. Network layer chia nhá» cÃ¡c segment tá»« Transport layer thÃ nh cÃ¡c Ä‘Æ¡n vá»‹ nhá» hÆ¡n, gá»i lÃ  packet, trÃªn thiáº¿t bá»‹ gá»­i vÃ  táº­p há»£p láº¡i cÃ¡c packet nÃ y trÃªn thiáº¿t bá»‹ nháº­n.

Network layer cÅ©ng tÃ¬m Ä‘Æ°á»ng Ä‘i váº­t lÃ½ tá»‘i Æ°u nháº¥t Ä‘á»ƒ dá»¯ liá»‡u Ä‘áº¿n Ä‘Ã­ch, quÃ¡ trÃ¬nh nÃ y Ä‘Æ°á»£c gá»i lÃ  routing.

CÃ¡c Network layer protocols bao gá»“m IP, Internet Control Message Protocol (ICMP), Internet Group Message Protocol (IGMP) vÃ  bá»™ giao thá»©c IPsec.

## Táº§ng 2 â€“ Data Link Layer (Táº§ng liÃªn káº¿t)

- Táº§ng liÃªn káº¿t dá»¯ liá»‡u ráº¥t giá»‘ng vá»›i táº§ng máº¡ng, ngoáº¡i trá»« táº§ng liÃªn káº¿t dá»¯ liá»‡u táº¡o Ä‘iá»u kiá»‡n thuáº­n lá»£i cho viá»‡c truyá»n dá»¯ liá»‡u giá»¯a hai thiáº¿t bá»‹ trÃªn cÃ¹ng má»™t máº¡ng . Táº§ng liÃªn káº¿t dá»¯ liá»‡u láº¥y cÃ¡c gÃ³i tá»« táº§ng máº¡ng vÃ  chia chÃºng thÃ nh cÃ¡c pháº§n nhá» hÆ¡n gá»i lÃ  frame. Giá»‘ng nhÆ° táº§ng máº¡ng, táº§ng liÃªn káº¿t dá»¯ liá»‡u cÅ©ng chá»‹u trÃ¡ch nhiá»‡m Ä‘iá»u khiá»ƒn luá»“ng vÃ  Ä‘iá»u khiá»ƒn lá»—i trong giao tiáº¿p ná»™i máº¡ng (Táº§ng váº­n chuyá»ƒn chá»‰ lÃ m nhiá»‡m vá»¥ Ä‘iá»u khiá»ƒn luá»“ng vÃ  Ä‘iá»u khiá»ƒn lá»—i cho truyá»n thÃ´ng giá»¯a cÃ¡c máº¡ng).


===

- Data link layer ráº¥t giá»‘ng vá»›i Network layer, nhÆ°ng Ä‘iá»ƒm khÃ¡c biá»‡t lÃ  Data link layer há»— trá»£ truyá»n dá»¯ liá»‡u giá»¯a hai thiáº¿t bá»‹ trong cÃ¹ng má»™t máº¡ng. Data link layer nháº­n cÃ¡c packet tá»« Network layer vÃ  chia nhá» chÃºng thÃ nh cÃ¡c pháº§n nhá» hÆ¡n gá»i lÃ  frame.

- Giá»‘ng nhÆ° Network layer, Data link layer cÅ©ng chá»‹u trÃ¡ch nhiá»‡m vá» flow control vÃ  error control trong giao tiáº¿p ná»™i máº¡ng (intra-network). Trong khi Ä‘Ã³, Transport layer chá»‰ thá»±c hiá»‡n flow control vÃ  error control cho giao tiáº¿p liÃªn máº¡ng (inter-network).


===
Ná»™i máº¡ng (Intra-network): LÃ  máº¡ng ná»™i bá»™, tá»©c lÃ  cÃ¡c thiáº¿t bá»‹ giao tiáº¿p vá»›i nhau trong cÃ¹ng má»™t máº¡ng, khÃ´ng cáº§n Ä‘i qua bá»™ Ä‘á»‹nh tuyáº¿n (router). VÃ­ dá»¥, cÃ¡c mÃ¡y tÃ­nh trong cÃ¹ng má»™t máº¡ng LAN (Local Area Network) cÃ³ thá»ƒ truyá»n dá»¯ liá»‡u trá»±c tiáº¿p vá»›i nhau thÃ´ng qua switch hoáº·c hub mÃ  khÃ´ng cáº§n káº¿t ná»‘i ra bÃªn ngoÃ i.

LiÃªn máº¡ng (Inter-network): LÃ  giao tiáº¿p giá»¯a cÃ¡c thiáº¿t bá»‹ thuá»™c cÃ¡c máº¡ng khÃ¡c nhau, cáº§n sá»­ dá»¥ng router Ä‘á»ƒ Ä‘á»‹nh tuyáº¿n dá»¯ liá»‡u. VÃ­ dá»¥, khi má»™t mÃ¡y tÃ­nh trong máº¡ng ná»™i bá»™ gá»­i dá»¯ liá»‡u Ä‘áº¿n má»™t mÃ¡y chá»§ trÃªn Internet, dá»¯ liá»‡u pháº£i Ä‘i qua nhiá»u máº¡ng trung gian, bao gá»“m cáº£ máº¡ng cá»§a nhÃ  cung cáº¥p dá»‹ch vá»¥ Internet (ISP).

TÃ³m láº¡i:

Ná»™i máº¡ng: Giao tiáº¿p trong cÃ¹ng má»™t máº¡ng cá»¥c bá»™ (LAN).
LiÃªn máº¡ng: Giao tiáº¿p giá»¯a cÃ¡c máº¡ng khÃ¡c nhau (WAN, Internet).

## Táº§ng 1 â€“ Physical Layer (Táº§ng Váº­t LÃ½)

- Lá»›p nÃ y bao gá»“m cÃ¡c thiáº¿t bá»‹ váº­t lÃ½ liÃªn quan Ä‘áº¿n viá»‡c truyá»n dá»¯ liá»‡u, cháº³ng háº¡n nhÆ° cÃ¡p vÃ  thiáº¿t bá»‹ chuyá»ƒn máº¡ch. ÄÃ¢y cÅ©ng lÃ  lá»›p nÆ¡i dá»¯ liá»‡u Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i thÃ nh má»™t luá»“ng bit, lÃ  má»™t chuá»—i gá»“m cÃ¡c sá»‘ 1 vÃ  0. Lá»›p váº­t lÃ½ cá»§a cáº£ hai thiáº¿t bá»‹ cÅ©ng pháº£i Ä‘á»“ng Ã½ vá» má»™t quy Æ°á»›c tÃ­n hiá»‡u Ä‘á»ƒ cÃ¡c sá»‘ 1 cÃ³ thá»ƒ Ä‘Æ°á»£c phÃ¢n biá»‡t vá»›i cÃ¡c sá»‘ 0 trÃªn cáº£ hai thiáº¿t bá»‹.

## CÃ¡ch dá»¯ liá»‡u di chuyá»ƒn qua mÃ´ hÃ¬nh OSI
Äá»ƒ thÃ´ng tin cÃ³ thá»ƒ Ä‘á»c Ä‘Æ°á»£c bá»Ÿi con ngÆ°á»i Ä‘Æ°á»£c truyá»n qua máº¡ng tá»« má»™t thiáº¿t bá»‹ nÃ y Ä‘áº¿n má»™t thiáº¿t bá»‹ khÃ¡c, dá»¯ liá»‡u pháº£i Ä‘i xuá»‘ng qua báº£y táº§ng cá»§a mÃ´ hÃ¬nh OSI trÃªn thiáº¿t bá»‹ gá»­i vÃ  sau Ä‘Ã³ Ä‘i lÃªn qua báº£y táº§ng trÃªn thiáº¿t bá»‹ nháº­n.

VÃ­ dá»¥: Ã”ng Cooper muá»‘n gá»­i email cho bÃ  Palmer. Ã”ng Cooper soáº¡n tin nháº¯n trong á»©ng dá»¥ng email trÃªn laptop cá»§a mÃ¬nh, sau Ä‘Ã³ nháº¥n "gá»­i". á»¨ng dá»¥ng email sáº½ chuyá»ƒn email cá»§a Ã´ng Ä‘áº¿n Application layer, táº§ng nÃ y sáº½ chá»n má»™t giao thá»©c (SMTP) vÃ  chuyá»ƒn dá»¯ liá»‡u xuá»‘ng Presentation layer. Presentation layer sáº½ nÃ©n dá»¯ liá»‡u, sau Ä‘Ã³ dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c chuyá»ƒn Ä‘áº¿n Session layer, nÆ¡i khá»Ÿi táº¡o phiÃªn giao tiáº¿p.

Tiáº¿p theo, dá»¯ liá»‡u sáº½ Ä‘áº¿n Transport layer, nÆ¡i nÃ³ sáº½ Ä‘Æ°á»£c chia thÃ nh cÃ¡c segment. Nhá»¯ng segment nÃ y sáº½ Ä‘Æ°á»£c chia nhá» hÆ¡n thÃ nh packet táº¡i Network layer, sau Ä‘Ã³ Ä‘Æ°á»£c chia thÃ nh frame táº¡i Data Link layer. Data Link layer sáº½ chuyá»ƒn frame Ä‘áº¿n Physical layer, nÆ¡i dá»¯ liá»‡u Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i thÃ nh má»™t dÃ²ng bit gá»“m cÃ¡c sá»‘ 1 vÃ  0 vÃ  gá»­i Ä‘i qua má»™t phÆ°Æ¡ng tiá»‡n truyá»n dáº«n váº­t lÃ½, cháº³ng háº¡n nhÆ° cÃ¡p máº¡ng.

Khi mÃ¡y tÃ­nh cá»§a bÃ  Palmer nháº­n Ä‘Æ°á»£c bit stream thÃ´ng qua má»™t phÆ°Æ¡ng tiá»‡n váº­t lÃ½ (cháº³ng háº¡n nhÆ° Wi-Fi), dá»¯ liá»‡u sáº½ cháº£y qua cÃ¡c táº§ng cá»§a mÃ´ hÃ¬nh OSI theo thá»© tá»± ngÆ°á»£c láº¡i. Äáº§u tiÃªn, Physical layer sáº½ chuyá»ƒn Ä‘á»•i bit stream tá»« cÃ¡c sá»‘ 1 vÃ  0 thÃ nh frame vÃ  gá»­i chÃºng Ä‘áº¿n Data Link layer. Data Link layer sáº½ táº­p há»£p láº¡i cÃ¡c frame thÃ nh packet Ä‘á»ƒ gá»­i Ä‘áº¿n Network layer. Network layer sáº½ táº¡o ra cÃ¡c segment tá»« packet cho Transport layer, nÆ¡i cÃ¡c segment sáº½ Ä‘Æ°á»£c táº­p há»£p láº¡i thÃ nh má»™t khá»‘i dá»¯ liá»‡u hoÃ n chá»‰nh.

Sau Ä‘Ã³, dá»¯ liá»‡u sáº½ tiáº¿p tá»¥c Ä‘áº¿n Session layer, nÆ¡i nÃ³ Ä‘Æ°á»£c chuyá»ƒn Ä‘áº¿n Presentation layer vÃ  phiÃªn giao tiáº¿p sáº½ káº¿t thÃºc. Presentation layer sáº½ giáº£i nÃ©n dá»¯ liá»‡u vÃ  chuyá»ƒn dá»¯ liá»‡u thÃ´ lÃªn Application layer. Application layer sau Ä‘Ã³ sáº½ cung cáº¥p dá»¯ liá»‡u á»Ÿ dáº¡ng con ngÆ°á»i cÃ³ thá»ƒ Ä‘á»c Ä‘Æ°á»£c cho pháº§n má»m email cá»§a bÃ  Palmer, giÃºp bÃ  cÃ³ thá»ƒ Ä‘á»c email cá»§a Ã´ng Cooper trÃªn mÃ n hÃ¬nh laptop cá»§a mÃ¬nh.

## MÃ´ hÃ¬nh TCP/IP lÃ  gÃ¬?    
MÃ´ hÃ¬nh TCP/IP, hay cÃ²n gá»i lÃ  mÃ´ hÃ¬nh DoD, lÃ  bá»™ giao thá»©c Ä‘Æ°á»£c sá»­ dá»¥ng phá»• biáº¿n trÃªn Internet. MÃ´ hÃ¬nh nÃ y chia thÃ nh 4 táº§ng chÃ­nh:

Táº§ng 1 â€“ Giao diá»‡n máº¡ng (Network Interface Layer): Káº¿t há»£p chá»©c nÄƒng cá»§a táº§ng váº­t lÃ½ vÃ  táº§ng liÃªn káº¿t dá»¯ liá»‡u trong OSI, Ä‘áº£m báº£o truyá»n dá»¯ liá»‡u trÃªn má»™t liÃªn káº¿t cá»¥ thá»ƒ.
Táº§ng 2 â€“ Internet (Internet Layer): Äá»‹nh nghÄ©a Ä‘á»‹a chá»‰ IP vÃ  Ä‘á»‹nh tuyáº¿n cÃ¡c gÃ³i tin qua cÃ¡c máº¡ng khÃ¡c nhau (tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i táº§ng Máº¡ng cá»§a OSI).
Táº§ng 3 â€“ Giao váº­n (Transport Layer): Chá»‹u trÃ¡ch nhiá»‡m Ä‘áº£m báº£o truyá»n táº£i dá»¯ liá»‡u giá»¯a cÃ¡c Ä‘áº§u cuá»‘i. CÃ¡c giao thá»©c chÃ­nh á»Ÿ táº§ng nÃ y lÃ  TCP vÃ  UDP.
Táº§ng 4 â€“ á»¨ng dá»¥ng (Application Layer): Gá»“m cÃ¡c giao thá»©c á»©ng dá»¥ng nhÆ° HTTP, FTP, SMTP, DNS, â€¦ tÆ°Æ¡ng tá»± nhÆ° táº§ng á»¨ng dá»¥ng cá»§a OSI; tuy nhiÃªn, á»Ÿ mÃ´ hÃ¬nh TCP/IP cÃ¡c chá»©c nÄƒng cá»§a táº§ng PhiÃªn vÃ  TrÃ¬nh diá»…n cá»§a OSI Ä‘Æ°á»£c tÃ­ch há»£p vÃ o táº§ng á»©ng dá»¥ng nÃ y 


## PhÃ¢n biá»‡t Ä‘Æ°á»£c Ã½ nghÄ©a cá»§a 02 mÃ´i hÃ¬nh & má»‘i tÆ°Æ¡ng quan cá»§a chÃºng.

- Äiá»ƒm tÆ°Æ¡ng Ä‘á»“ng giá»¯a mÃ´ hÃ¬nh OSI vÃ  TCP/IP
    + Chia sáº» kiáº¿n trÃºc chung
Cáº£ 2 mÃ´ hÃ¬nh Ä‘á»u lÃ  mÃ´ hÃ¬nh logic vÃ  cÃ³ kiáº¿n trÃºc tÆ°Æ¡ng tá»± vÃ¬ cáº£ 2 mÃ´ hÃ¬nh Ä‘á»u Ä‘Æ°á»£c xÃ¢y dá»±ng dá»±a trÃªn cÃ¡c lá»›p
    + XÃ¡c Ä‘á»‹nh tiÃªu chuáº©n 
Cáº£ 2 lá»›p Ä‘á»u cÃ³ cÃ¡c tiÃªu chuáº©n xÃ¡c Ä‘á»‹nh vÃ  chÃºng cÅ©ng cung cáº¥p khuÃ´n khá»• Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c tiÃªu chuáº©n vÃ  thiáº¿t bá»‹
    + Quy trÃ¬nh kháº¯c phá»¥c sá»± cá»‘ Ä‘Æ°á»£c Ä‘Æ¡n giáº£n hÃ³a
Cáº£ 2 mÃ´ hÃ¬nh Ä‘Ã£ Ä‘Æ¡n giáº£n hÃ³a quÃ¡ trÃ¬nh kháº¯c phá»¥c sá»± cá»‘ báº±ng cÃ¡ch chia nhá» chá»©c nÄƒng phá»©c táº¡p thÃ nh cÃ¡c thÃ nh pháº§n Ä‘Æ¡n giáº£n hÆ¡n
    + CÃ¡c tiÃªu chuáº©n Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh trÆ°á»›c
CÃ¡c tiÃªu chuáº©n vÃ  giao thá»©c Ä‘Ã£ Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh trÆ°á»›c, nhá»¯ng mÃ´ hÃ¬nh nÃ y khÃ´ng xÃ¡c Ä‘á»‹nh láº¡i chÃºng, chá»‰ tham kháº£o hoáº·c sá»­ dá»¥ng láº¡i chÃºng. VÃ­ dá»¥, cÃ¡c tiÃªu chuáº©n Ethernet Ä‘Ã£ Ä‘Æ°á»£c IEEE xÃ¡c Ä‘á»‹nh trÆ°á»›c khi phÃ¡t triá»ƒn cÃ¡c mÃ´ hÃ¬nh 
    + Cáº£ 2 Ä‘á»u cÃ³ chá»©c nÄƒng tÆ°Æ¡ng tá»± cá»§a cÃ¡c lá»›p Transport vÃ  Network

- Sá»± khÃ¡c biá»‡t giá»¯a mÃ´ hÃ¬nh OSI vÃ  TCP/IP

```
         MÃ´ hÃ¬nh OSI           |           MÃ´ hÃ¬nh TCP/IP
Äá»™ tin cáº­y vÃ  phá»• biáº¿n:
    + Nhiá»u ngÆ°á»i cho ráº±ng Ä‘Ã¢y lÃ  mÃ´ hÃ¬nh cÅ©, chá»‰ Ä‘á»ƒ tham kháº£o, sá»‘ ngÆ°á»i sá»­ dá»¥ng háº¡n cháº¿ hÆ¡n so vá»›i TCP/IP
    + ÄÆ°á»£c chuáº©n hÃ³a, nhiá»u ngÆ°á»i tin cáº­y vÃ  sá»­ dá»¥ng phá»• biáº¿n trÃªn toÃ n cáº§u
PhÆ°Æ¡ng phÃ¡p tiáº¿p cáº­n:
    + Tiáº¿p cáº­n theo chiá»u dá»c
    + Tiáº¿p cáº­n theo chiá»u ngang
Sá»± káº¿t há»£p giá»¯a cÃ¡c táº§ng:
    + Má»—i táº§ng khÃ¡c nhau sáº½ thá»±c hiá»‡n má»™t nhiá»‡m vá»¥ khÃ¡c nhau, khÃ´ng cÃ³ sá»± káº¿t há»£p giá»¯a báº¥t cá»© táº§ng nÃ o
    + Trong táº§ng á»©ng dá»¥ng cÃ³ táº§ng trÃ¬nh diá»…n vÃ  táº§ng phiÃªn Ä‘Æ°á»£c káº¿t há»£p vá»›i nhau
Thiáº¿t káº¿:
    + PhÃ¡t triá»ƒn mÃ´ hÃ¬nh trÆ°á»›c sau Ä‘Ã³ sáº½ phÃ¡t triá»ƒn giao thá»©c
    + CÃ¡c giao thá»©c Ä‘Æ°á»£c thiáº¿t káº¿ trÆ°á»›c sau Ä‘Ã³ phÃ¡t triá»ƒn mÃ´ hÃ¬nh
Sá»‘ lá»›p (Táº§ng)
    + 7
    + 4
```

- Äiá»ƒm giá»‘ng nhau:
    + Cáº£ hai Ä‘á»u lÃ  mÃ´ hÃ¬nh logic, phÃ¢n chia quÃ¡ trÃ¬nh truyá»n dá»¯ liá»‡u thÃ nh cÃ¡c lá»›p cÃ³ chá»©c nÄƒng riÃªng biá»‡t.
    + Má»—i táº§ng cá»§a mÃ´ hÃ¬nh Ä‘á»u Ä‘áº£m nhiá»‡m má»™t pháº§n cÃ´ng viá»‡c (vÃ­ dá»¥: táº§ng giao váº­n quáº£n lÃ½ viá»‡c chuyá»ƒn dá»¯ liá»‡u giá»¯a cÃ¡c Ä‘áº§u cuá»‘i).
    + Cung cáº¥p tiÃªu chuáº©n Ä‘á»ƒ cÃ¡c nhÃ  sáº£n xuáº¥t phÃ¡t triá»ƒn thiáº¿t bá»‹ vÃ  pháº§n má»m giao tiáº¿p Ä‘Æ°á»£c vá»›i nhau 
- Äiá»ƒm khÃ¡c nhau:
    + Sá»‘ táº§ng: OSI cÃ³ 7 táº§ng trong khi TCP/IP cÃ³ 4 táº§ng. á» TCP/IP, cÃ¡c chá»©c nÄƒng cá»§a táº§ng PhiÃªn vÃ  TrÃ¬nh diá»…n cá»§a OSI Ä‘Æ°á»£c gá»™p chung vÃ o táº§ng á»¨ng dá»¥ng.
    + CÃ¡ch tiáº¿p cáº­n: OSI Ä‘Æ°á»£c xÃ¢y dá»±ng theo cÃ¡ch â€œtrÃ¡i xuá»‘ngâ€ (tá»« mÃ´ hÃ¬nh lÃ½ thuyáº¿t Ä‘áº¿n giao thá»©c thá»±c táº¿) trong khi TCP/IP Ä‘Æ°á»£c phÃ¡t triá»ƒn dá»±a trÃªn giao thá»©c Ä‘Ã£ Ä‘Æ°á»£c triá»ƒn khai thá»±c táº¿ trÃªn ARPANET.
    + á»¨ng dá»¥ng thá»±c táº¿: MÃ´ hÃ¬nh TCP/IP Ä‘Æ°á»£c sá»­ dá»¥ng rá»™ng rÃ£i trÃªn Internet vÃ¬ tÃ­nh hiá»‡u quáº£ vÃ  Ä‘Æ¡n giáº£n, trong khi mÃ´ hÃ¬nh OSI chá»§ yáº¿u lÃ  frame tham kháº£o giÃºp há»c vÃ  nghiÃªn cá»©u cÃ¡c khÃ¡i niá»‡m máº¡ng


## PhÃ¢n biá»‡t UDP/TCP.

## TCP
- TCP (Transmission Control Protocol) lÃ  má»™t giao thá»©c máº¡ng dÃ¹ng trong truyá»n dá»¯ liá»‡u qua má»™t máº¡ng khÃ¡c, Ä‘Æ°á»£c nháº­n xÃ©t lÃ  khÃ¡ quan trá»ng. Má»™t giao thá»©c trong pháº¡m vi máº¡ng bao gá»“m nhá»¯ng quy táº¯c vÃ  thá»© tá»± quáº£n lÃ½ quÃ¡ trÃ¬nh truyá»n dá»¯ liá»‡u sao cho ngÆ°á»i dÃ¹ng trÃªn toÃ n cáº§u dÃ¹ á»Ÿ Ä‘Ã¢u, trÃªn ná»n táº£ng gÃ¬, pháº§n má»m nÃ o Ä‘á»u Ä‘Æ°á»£c phÃ©p thao tÃ¡c theo cÃ¹ng má»™t phÆ°Æ¡ng thá»©c tÆ°Æ¡ng tá»± nhau thÃ¬ Ä‘Æ°á»£c gá»i lÃ  TCP.
- ThÃ´ng thÆ°á»ng, TCP thÆ°á»ng liÃªn káº¿t vá»›i giao thá»©c Internet (IP) táº¡o thÃ nh má»™t Ä‘Ã´i Ä‘Æ°á»£c gá»i lÃ  TCP/IP. Thuáº­t ngá»¯ nÃ y hay xuáº¥t hiá»‡n á»Ÿ má»¥c network setting trÃªn mÃ¡y tÃ­nh hay cÃ¡c thiáº¿t bá»‹ di Ä‘á»™ng cÃ¡ nhÃ¢n. IP cÃ³ nhiá»‡m vá»¥ gÃ¡n Ä‘á»‹a chá»‰ thá»±c hiá»‡n Ä‘Æ°a nhá»¯ng gÃ³i tin tá»« nguá»“n Ä‘áº¿n Ä‘Ã­ch, cÃ²n TCP xÃ¡c thá»±c tÃ­nh tin cáº­y cá»§a truyá»n dáº«n.

### CÃ¡ch hoáº¡t Ä‘á»™ng cá»§a TCP

- CÃ¡c gÃ³i tin Ä‘Æ°á»£c TCP dÃ¡n nhÃ£n theo hÃ¬nh thá»©c Ä‘Ã¡nh sá»‘. TCP cÅ©ng sáº½ chá»‹u trÃ¡ch nhiá»‡m viá»‡c dá»¯ liá»‡u Ä‘áº¿n Ä‘Ã­ch trong má»™t thá»i gian cá»¥ thá»ƒ vÃ  nÃ³ cÅ©ng pháº£i tuÃ¢n theo nhá»¯ng quy Ä‘á»‹nh vá» máº·t ká»¹ thuáº­t. á» nhá»¯ng gÃ³i tin nháº­n Ä‘Æ°á»£c, thiáº¿t bá»‹ gá»­i Ä‘Æ°á»£c nháº­n thÃ´ng bÃ¡o báº±ng hÃ¬nh thá»©c lÃ  má»™t gÃ³i Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a lÃ  xÃ¡c nháº­n.

- Náº¿u thá»i gian chá» (tÆ°Æ¡ng Ä‘Æ°Æ¡ng vÃ i trÄƒm mili giÃ¢y) káº¿t thÃºc mÃ  khÃ´ng nháº­n Ä‘Æ°á»£c thÃ´ng bÃ¡o, nguá»“n gá»­i tiáº¿n hÃ nh gá»­i Ä‘i má»™t gÃ³i báº£o sao cá»§a tin bá»‹ máº¥t hoáº·c táº¡m dá»«ng. Nhá»¯ng gá»i tin nÃ o khÃ´ng tuÃ¢n theo trÃ¬nh tá»± cÅ©ng sáº½ khÃ´ng Ä‘Æ°á»£c xÃ¡c nháº­n. ChÃ­nh vÃ¬ tháº¿, háº§u háº¿t nhá»¯ng gÃ³i dá»¯ liá»‡u sáº½ luÃ´n Ä‘Æ°á»£c sáº¯p xáº¿p theo thá»© tá»± cá»‘ Ä‘á»‹nh, khÃ´ng cÃ³ sÆ¡ há»Ÿ, á»Ÿ má»™t thá»i gian cháº¥p nháº­n Ä‘Æ°á»£c vÃ  Ä‘Ã£ xÃ¡c Ä‘á»‹nh trÆ°á»›c Ä‘Ã³.


# Switching

## TÃ¬m hiá»ƒu vá» VLAN, cÃ¡ch á»©ng dá»¥ng VLAN

## PhÃ¢n biá»‡t router, switch, hub
### Hub â€“ Bá»™ táº­p trung (Thiáº¿t bá»‹ Ä‘Æ¡n giáº£n nháº¥t)
- Hub lÃ  thiáº¿t bá»‹ máº¡ng cÆ¡ báº£n, dÃ¹ng Ä‘á»ƒ káº¿t ná»‘i nhiá»u thiáº¿t bá»‹ vÃ o cÃ¹ng má»™t máº¡ng vÃ  truyá»n dá»¯ liá»‡u Ä‘áº¿n táº¥t cáº£ cÃ¡c cá»•ng mÃ  nÃ³ cÃ³.
- CÃ¡ch hoáº¡t Ä‘á»™ng:
    + Khi má»™t mÃ¡y tÃ­nh gá»­i dá»¯ liá»‡u Ä‘áº¿n Hub, Hub sáº½ phÃ¡t (broadcast) dá»¯ liá»‡u nÃ y Ä‘áº¿n táº¥t cáº£ cÃ¡c thiáº¿t bá»‹ khÃ¡c trong máº¡ng.
    + Äiá»u nÃ y gÃ¢y lÃ£ng phÃ­ bÄƒng thÃ´ng vÃ  dá»… bá»‹ táº¯c ngháº½n khi cÃ³ nhiá»u thiáº¿t bá»‹ káº¿t ná»‘
- VÃ­ dá»¥: Má»™t phÃ²ng game cÅ© sá»­ dá»¥ng Hub Ä‘á»ƒ káº¿t ná»‘i táº¥t cáº£ mÃ¡y tÃ­nh. Khi má»™t mÃ¡y gá»­i dá»¯ liá»‡u, táº¥t cáº£ mÃ¡y khÃ¡c Ä‘á»u nháº­n Ä‘Æ°á»£c, dÃ¹ cÃ³ cáº§n hay khÃ´ng.
### Switch â€“ Bá»™ chuyá»ƒn máº¡ch (ThÃ´ng minh hÆ¡n Hub)
- Switch cÅ©ng káº¿t ná»‘i nhiá»u thiáº¿t bá»‹ trong má»™t máº¡ng LAN, nhÆ°ng thÃ´ng minh hÆ¡n Hub vÃ¬ nÃ³ cÃ³ thá»ƒ xÃ¡c Ä‘á»‹nh chÃ­nh xÃ¡c thiáº¿t bá»‹ nÃ o cáº§n nháº­n dá»¯ liá»‡u.
- CÃ¡ch hoáº¡t Ä‘á»™ng:
    + Switch sá»­ dá»¥ng Ä‘á»‹a chá»‰ MAC cá»§a thiáº¿t bá»‹ Ä‘á»ƒ gá»­i dá»¯ liá»‡u Ä‘áº¿n Ä‘Ãºng Ä‘Ã­ch, thay vÃ¬ phÃ¡t toÃ n bá»™ nhÆ° Hub.
    +  giáº£m táº£i cho máº¡ng, tá»‘i Æ°u hiá»‡u suáº¥t vÃ  báº£o máº­t hÆ¡n.
- VÃ­ dá»¥: Trong vÄƒn phÃ²ng cÃ´ng ty, Switch giÃºp cÃ¡c mÃ¡y tÃ­nh chá»‰ gá»­i dá»¯ liá»‡u Ä‘áº¿n Ä‘Ãºng thiáº¿t bá»‹ nháº­n, trÃ¡nh lÃ£ng phÃ­ bÄƒng thÃ´ng.
### Router â€“ Bá»™ Ä‘á»‹nh tuyáº¿n (ThÃ´ng minh nháº¥t)
- Router lÃ  thiáº¿t bá»‹ giÃºp káº¿t ná»‘i cÃ¡c máº¡ng khÃ¡c nhau vá»›i nhau, cháº³ng háº¡n nhÆ° máº¡ng ná»™i bá»™ (LAN) vá»›i Internet (WAN).
    + Router cÃ³ thá»ƒ cáº¥p Ä‘á»‹a chá»‰ IP cho cÃ¡c thiáº¿t bá»‹ trong máº¡ng.
    + HÆ°á»›ng dáº«n cÃ¡c gÃ³i tin Ä‘i qua máº¡ng ná»™i bá»™ hoáº·c ra Internet.
    + CÃ³ thá»ƒ thiáº¿t láº­p tÆ°á»ng lá»­a, NAT, DHCP Ä‘á»ƒ quáº£n lÃ½ máº¡ng tá»‘t hÆ¡n.

```
4. So sÃ¡nh tá»•ng quan
TiÃªu chÃ­	Hub	Switch	Router
Chá»©c nÄƒng chÃ­nh	Káº¿t ná»‘i cÃ¡c thiáº¿t bá»‹ trong LAN	Chuyá»ƒn tiáº¿p dá»¯ liá»‡u thÃ´ng minh trong LAN	Káº¿t ná»‘i cÃ¡c máº¡ng khÃ¡c nhau (LAN â†” Internet)
CÃ¡ch truyá»n dá»¯ liá»‡u	Gá»­i Ä‘áº¿n táº¥t cáº£ thiáº¿t bá»‹	Gá»­i chÃ­nh xÃ¡c Ä‘áº¿n thiáº¿t bá»‹ Ä‘Ã­ch	Äá»‹nh tuyáº¿n dá»¯ liá»‡u giá»¯a cÃ¡c máº¡ng
Äá»‹nh danh thiáº¿t bá»‹	KhÃ´ng cÃ³	Dá»±a trÃªn Ä‘á»‹a chá»‰ MAC	Dá»±a trÃªn Ä‘á»‹a chá»‰ IP
Báº£o máº­t	KÃ©m, dá»… bá»‹ nghe lÃ©n	Tá»‘t hÆ¡n Hub	Ráº¥t tá»‘t, cÃ³ thá»ƒ thiáº¿t láº­p tÆ°á»ng lá»­a
Hiá»‡u suáº¥t máº¡ng	KÃ©m, dá»… ngháº½n	Tá»‘t, giáº£m táº¯c ngháº½n	Cao nháº¥t
GiÃ¡ thÃ nh	Ráº» nháº¥t	Trung bÃ¬nh	Äáº¯t nháº¥t
DÃ¹ng khi nÃ o?	Máº¡ng nhá», Ã­t thiáº¿t bá»‹	Máº¡ng ná»™i bá»™ cáº§n hiá»‡u suáº¥t tá»‘t	Cáº§n káº¿t ná»‘i Internet hoáº·c nhiá»u máº¡ng

```

## LAN

- LAN lÃ  má»™t máº¡ng mÃ¡y tÃ­nh ná»™i bá»™, káº¿t ná»‘i cÃ¡c thiáº¿t bá»‹ trong má»™t pháº¡m vi nhá» nhÆ° vÄƒn phÃ²ng, tÃ²a nhÃ , hoáº·c trÆ°á»ng há»c. CÃ¡c thiáº¿t bá»‹ trong LAN cÃ³ thá»ƒ chia sáº» tÃ i nguyÃªn (mÃ¡y in, internet, dá»¯ liá»‡u) mÃ  khÃ´ng cáº§n káº¿t ná»‘i internet.
- VÃ­ dá»¥ vá» LAN: CÃ´ng ty A cÃ³ má»™t vÄƒn phÃ²ng vá»›i 20 mÃ¡y tÃ­nh, má»™t mÃ¡y in, vÃ  má»™t server. Táº¥t cáº£ Ä‘á»u káº¿t ná»‘i vÃ o cÃ¹ng má»™t switch. Khi má»™t nhÃ¢n viÃªn in tÃ i liá»‡u, dá»¯ liá»‡u truyá»n tá»« mÃ¡y tÃ­nh cá»§a há» Ä‘áº¿n mÃ¡y in thÃ´ng qua máº¡ng LAN mÃ  khÃ´ng cáº§n Ä‘i qua internet.
- Äáº·c Ä‘iá»ƒm cá»§a LAN:
    + Táº¥t cáº£ thiáº¿t bá»‹ káº¿t ná»‘i trá»±c tiáº¿p vá»›i nhau.
    + Sá»­ dá»¥ng switch hoáº·c hub Ä‘á»ƒ truyá»n dá»¯ liá»‡u.
    + Dá»… bá»‹ táº¯c ngháº½n máº¡ng khi cÃ³ nhiá»u thiáº¿t bá»‹ gá»­i dá»¯ liá»‡u cÃ¹ng lÃºc.
    + KhÃ´ng cÃ³ cÆ¡ cháº¿ tÃ¡ch biá»‡t giá»¯a cÃ¡c nhÃ³m thiáº¿t bá»‹ trong máº¡ng.


## VLAN

![alt text](./images/image-1.png)

- VLAN lÃ  viáº¿t táº¯t cá»§a Virtual Local Area Network, hay cÃ²n gá»i lÃ  máº¡ng LAN áº£o. VLAN lÃ  má»™t ká»¹ thuáº­t phÃ¢n chia máº¡ng LAN váº­t lÃ½ thÃ nh cÃ¡c máº¡ng logic riÃªng biá»‡t, Ä‘Æ°á»£c gá»i lÃ  cÃ¡c VLAN.
- Má»—i VLAN hoáº¡t Ä‘á»™ng nhÆ° má»™t máº¡ng LAN riÃªng biá»‡t, vá»›i lÆ°u lÆ°á»£ng truy cáº­p riÃªng biá»‡t vÃ  Ä‘Æ°á»£c cÃ¡ch ly vá»›i cÃ¡c VLAN khÃ¡c.
- Náº¿u khÃ´ng cÃ³ máº¡ng Virtual LAN, má»™t broadcast Ä‘Æ°á»£c gá»­i tá»« host cÃ³ thá»ƒ dá»… dÃ ng Ä‘i Ä‘áº¿n má»i thiáº¿t bá»‹ máº¡ng. Khi Ä‘Ã³, táº¥t cáº£ thiáº¿t bá»‹ Ä‘á»u sáº½ xá»­ lÃ½ nhá»¯ng frame Ä‘Ã£ nháº­n broadcast Ä‘Ã³. Viá»‡c nÃ y sáº½ lÃ m tÄƒng Ä‘Ã¡ng ká»ƒ chi phÃ­ cho CPU trÃªn má»—i thiáº¿t bá»‹, Ä‘á»“ng thá»i lÃ m giáº£m kháº£ nÄƒng báº£o máº­t cá»§a há»‡ thá»‘ng.

- Náº¿u ta Ä‘áº·t cÃ¡c interface trÃªn cÃ¡c switch á»Ÿ nhá»¯ng VLAN riÃªng biá»‡t, má»™t broadcast tá»« host A chá»‰ cÃ³ thá»ƒ Ä‘i Ä‘áº¿n cÃ¡c thiáº¿t bá»‹ kháº£ dá»¥ng á»Ÿ trong cÃ¹ng má»™t Virtual LAN. CÃ¡c host cá»§a Virtual LAN sáº½ khÃ´ng há» biáº¿t vá» cÃ¡ch thá»©c giao tiáº¿p.

- Má»—i VLAN hoáº¡t Ä‘á»™ng nhÆ° má»™t máº¡ng LAN Ä‘á»™c láº­p, máº·c dÃ¹ táº¥t cáº£ cÃ¡c thiáº¿t bá»‹ trong cÃ¡c VLAN khÃ¡c nhau cÃ³ thá»ƒ káº¿t ná»‘i Ä‘áº¿n cÃ¹ng má»™t thiáº¿t bá»‹ chuyá»ƒn máº¡ch (switch) váº­t lÃ½. Äiá»u nÃ y giÃºp tÄƒng cÆ°á»ng báº£o máº­t, giáº£m lÆ°u lÆ°á»£ng khÃ´ng cáº§n thiáº¿t (nhÆ° broadcast) vÃ  táº¡o Ä‘iá»u kiá»‡n quáº£n lÃ½ máº¡ng hiá»‡u quáº£ hÆ¡n.

- Giáº£ sá»­ báº¡n lÃ  quáº£n trá»‹ viÃªn máº¡ng cá»§a má»™t cÃ´ng ty cÃ³ 30 mÃ¡y tÃ­nh Ä‘Æ°á»£c káº¿t ná»‘i qua má»™t switch. CÃ´ng ty cÃ³ 3 phÃ²ng ban:
    + PhÃ²ng IT
    + PhÃ²ng Kinh doanh
    + PhÃ²ng NhÃ¢n sá»±
- Cáº¥u hÃ¬nh trÃªn switch:
    + Táº¡o VLAN 10 cho PhÃ²ng IT.
    + Táº¡o VLAN 20 cho PhÃ²ng Kinh doanh.
    + Táº¡o VLAN 30 cho PhÃ²ng NhÃ¢n sá»±.
- PhÃ¢n bá»• cá»•ng (port):
    + GÃ¡n cÃ¡c cá»•ng cá»§a switch mÃ  cÃ¡c mÃ¡y tÃ­nh phÃ²ng IT káº¿t ná»‘i vÃ o VLAN 10.
    + GÃ¡n cÃ¡c cá»•ng mÃ  cÃ¡c mÃ¡y tÃ­nh phÃ²ng Kinh doanh káº¿t ná»‘i vÃ o VLAN 20.
    + GÃ¡n cÃ¡c cá»•ng mÃ  cÃ¡c mÃ¡y tÃ­nh phÃ²ng NhÃ¢n sá»± káº¿t ná»‘i vÃ o VLAN 30.

- GÃ¡n cá»•ng vÃ o VLAN:
    + Khi ta gÃ¡n má»™t cá»•ng vÃ o má»™t VLAN cá»¥ thá»ƒ, báº¡n Ä‘ang â€œÄ‘á»‹nh danhâ€ ráº±ng táº¥t cáº£ dá»¯ liá»‡u gá»­i vÃ  nháº­n qua cá»•ng Ä‘Ã³ sáº½ Ä‘Æ°á»£c xem lÃ  thuá»™c vá» VLAN Ä‘Ã³. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  cÃ¡c thiáº¿t bá»‹ káº¿t ná»‘i vÃ o cá»•ng Ä‘Ã³ sáº½ thuá»™c nhÃ³m máº¡ng áº£o (VLAN) Ä‘Ã£ Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh vÃ  chá»‰ cÃ³ thá»ƒ giao tiáº¿p trá»±c tiáº¿p vá»›i cÃ¡c thiáº¿t bá»‹ khÃ¡c trong cÃ¹ng VLAN (trá»« khi cÃ³ thiáº¿t bá»‹ Ä‘á»‹nh tuyáº¿n giá»¯a cÃ¡c VLAN).

```plaintext
TiÃªu chÃ­	LAN	VLAN
Äá»‹nh nghÄ©a	Máº¡ng ná»™i bá»™ cá»¥c bá»™	Máº¡ng LAN áº£o, chia nhá» LAN thÃ nh nhiá»u máº¡ng con
PhÃ¢n chia	Dá»±a vÃ o pháº§n cá»©ng (switch, router)	Dá»±a vÃ o cáº¥u hÃ¬nh logic trÃªn switch
Báº£o máº­t	Tháº¥p, dá»… bá»‹ Ä‘Ã¡nh cáº¯p dá»¯ liá»‡u giá»¯a cÃ¡c thiáº¿t bá»‹	Cao, cÃ¡ch ly dá»¯ liá»‡u giá»¯a cÃ¡c VLAN
Hiá»‡u suáº¥t	Dá»… bá»‹ ngháº½n máº¡ng khi cÃ³ nhiá»u broadcast	Giáº£m bá»›t broadcast, tÄƒng hiá»‡u suáº¥t
Chi phÃ­	Ráº» hÆ¡n, chá»‰ cáº§n switch cÆ¡ báº£n	CÃ³ thá»ƒ cáº§n switch há»— trá»£ VLAN (switch Layer 2 trá»Ÿ lÃªn)
```

## VLAN hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?
- VLAN hoáº¡t Ä‘á»™ng báº±ng cÃ¡ch Ä‘Ã¡nh dáº¥u cÃ¡c khung Ethernet vá»›i má»™t mÃ£ VLAN (VLAN ID). MÃ£ VLAN nÃ y xÃ¡c Ä‘á»‹nh VLAN mÃ  khung Ethernet thuá»™c vá». Khi má»™t thiáº¿t bá»‹ gá»­i khung Ethernet, chÃºng sáº½ thÃªm mÃ£ VLAN vÃ o khung. Khi khung Ethernet Ä‘áº¿n bá»™ chuyá»ƒn máº¡ch, bá»™ chuyá»ƒn máº¡ch sáº½ Ä‘á»c mÃ£ VLAN vÃ  chuyá»ƒn khung Ä‘áº¿n cá»•ng tÆ°Æ¡ng á»©ng vá»›i VLAN Ä‘Ã³.
![alt text](./images/image-3.png)
- DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c bÆ°á»›c chi tiáº¿t vá» cÃ¡ch VLAN hoáº¡t Ä‘á»™ng:
    1ï¸âƒ£ Gá»­i Frame Ethernet: Khi má»™t thiáº¿t bá»‹ gá»­i Frame Ethernet, nÃ³ sáº½ thÃªm mÃ£ VLAN vÃ o Frame. mÃ£ VLAN nÃ y xÃ¡c Ä‘á»‹nh VLAN mÃ  Frame Ethernet thuá»™c vá».
    2ï¸âƒ£ Chuyá»ƒn Frame Ä‘áº¿n Switch: Frame Ethernet Ä‘Æ°á»£c truyá»n qua cÃ¡p Ä‘áº¿n Switch.
    3ï¸âƒ£ Switch Ä‘á»c mÃ£ VLAN: Switch Ä‘á»c mÃ£ VLAN trong Frame Ethernet Ä‘á»ƒ xÃ¡c Ä‘á»‹nh nÃ³ thuá»™c VLAN nÃ o.
    4ï¸âƒ£ Chuyá»ƒn Frame Ä‘áº¿n cá»•ng tÆ°Æ¡ng á»©ng: Switch chuyá»ƒn Frame Ethernet Ä‘áº¿n cá»•ng tÆ°Æ¡ng á»©ng vá»›i VLAN Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh bá»Ÿi mÃ£ VLAN.
    5ï¸âƒ£ Thiáº¿t bá»‹ nháº­n Frame: Thiáº¿t bá»‹ trÃªn cá»•ng nháº­n Ä‘Æ°á»£c Frame Ethernet vÃ  xá»­ lÃ½ nÃ³.

- VÃ Dá»¤: 
    + Giáº£ sá»­ báº¡n cÃ³ má»™t máº¡ng LAN vá»›i ba VLAN: VLAN 10 cho bá»™ pháº­n káº¿ toÃ¡n, VLAN 20 cho bá»™ pháº­n bÃ¡n hÃ ng vÃ  VLAN 30 cho bá»™ pháº­n marketing. MÃ¡y tÃ­nh trong bá»™ pháº­n káº¿ toÃ¡n Ä‘Æ°á»£c káº¿t ná»‘i vá»›i cÃ¡c cá»•ng truy cáº­p Ä‘Æ°á»£c gÃ¡n vÃ o VLAN 10, mÃ¡y tÃ­nh trong bá»™ pháº­n bÃ¡n hÃ ng Ä‘Æ°á»£c káº¿t ná»‘i vá»›i cÃ¡c cá»•ng truy cáº­p Ä‘Æ°á»£c gÃ¡n vÃ o VLAN 20 vÃ  mÃ¡y tÃ­nh trong bá»™ pháº­n marketing Ä‘Æ°á»£c káº¿t ná»‘i vá»›i cÃ¡c cá»•ng truy cáº­p Ä‘Æ°á»£c gÃ¡n vÃ o VLAN 30.
    + Khi má»™t mÃ¡y tÃ­nh trong bá»™ pháº­n káº¿ toÃ¡n gá»­i email cho má»™t mÃ¡y tÃ­nh trong bá»™ pháº­n bÃ¡n hÃ ng, khung Ethernet sáº½ Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u vá»›i mÃ£ VLAN 10. Khi khung Ethernet Ä‘áº¿n bá»™ chuyá»ƒn máº¡ch, bá»™ chuyá»ƒn máº¡ch sáº½ Ä‘á»c mÃ£ VLAN vÃ  chuyá»ƒn khung Ä‘áº¿n cá»•ng Ä‘Æ°á»£c gÃ¡n vÃ o VLAN 20. MÃ¡y tÃ­nh trong bá»™ pháº­n bÃ¡n hÃ ng sau Ä‘Ã³ sáº½ nháº­n Ä‘Æ°á»£c khung Ethernet vÃ  xá»­ lÃ½ email.

- VLAN Ä‘Æ°á»£c phÃ¢n loáº¡i nhÆ° tháº¿ nÃ o?
VLAN Ä‘Æ°á»£c phÃ¢n loáº¡i theo nhiá»u phÆ°Æ¡ng thá»©c khÃ¡c nhau, dá»±a trÃªn tiÃªu chÃ­ vÃ  má»¥c Ä‘Ã­ch sá»­ dá»¥ng. DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ phÃ¢n loáº¡i VLAN phá»• biáº¿n:
1. VLAN dá»±a trÃªn cá»•ng (Port-based VLAN):
 + ÄÃ¢y lÃ  phÆ°Æ¡ng thá»©c phá»• biáº¿n nháº¥t, trong Ä‘Ã³ cÃ¡c thiáº¿t bá»‹ Ä‘Æ°á»£c gÃ¡n vÃ o VLAN dá»±a trÃªn cá»•ng switch mÃ  chÃºng káº¿t ná»‘i. Æ¯u Ä‘iá»ƒm cá»§a phÆ°Æ¡ng thá»©c nÃ y lÃ  Ä‘Æ¡n giáº£n vÃ  dá»… dÃ ng cáº¥u hÃ¬nh. Tuy nhiÃªn, nÃ³ khÃ´ng linh hoáº¡t vÃ¬ viá»‡c di chuyá»ƒn thiáº¿t bá»‹ sang cá»•ng khÃ¡c cÃ³ thá»ƒ thay Ä‘á»•i VLAN cá»§a chÃºng.

![alt text](./images/image.png)

2. VLAN dá»±a trÃªn Ä‘á»‹a chá»‰ MAC (MAC address-based VLAN)
- PhÆ°Æ¡ng thá»©c nÃ y gÃ¡n thiáº¿t bá»‹ vÃ o VLAN dá»±a trÃªn Ä‘á»‹a chá»‰ MAC duy nháº¥t cá»§a nÃ³. Æ¯u Ä‘iá»ƒm cá»§a phÆ°Æ¡ng thá»©c nÃ y lÃ  linh hoáº¡t hÆ¡n so vá»›i VLAN dá»±a trÃªn cá»•ng, vÃ¬ viá»‡c di chuyá»ƒn thiáº¿t bá»‹ khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n VLAN cá»§a nÃ³. Tuy nhiÃªn, chÃºng cÃ³ thá»ƒ phá»©c táº¡p hÆ¡n Ä‘á»ƒ cáº¥u hÃ¬nh vÃ  quáº£n lÃ½.
![alt text](./images/image-2.png)

3. VLAN dá»±a trÃªn giao thá»©c (Protocol-based VLAN)
- PhÆ°Æ¡ng thá»©c nÃ y gÃ¡n thiáº¿t bá»‹ vÃ o VLAN dá»±a trÃªn giao thá»©c máº¡ng mÃ  nÃ³ sá»­ dá»¥ng (vÃ­ dá»¥: IP, IPX). Æ¯u Ä‘iá»ƒm cá»§a phÆ°Æ¡ng thá»©c nÃ y lÃ  nÃ³ cÃ³ thá»ƒ há»¯u Ã­ch cho viá»‡c phÃ¢n chia lÆ°u lÆ°á»£ng truy cáº­p máº¡ng theo loáº¡i á»©ng dá»¥ng.

### Æ¯u vÃ  nhÆ°á»£c Ä‘iá»ƒm cá»§a VLAN lÃ  gÃ¬?
- TÄƒng cÆ°á»ng báº£o máº­t: VLAN giÃºp cÃ´ láº­p lÆ°u lÆ°á»£ng truy cáº­p cá»§a cÃ¡c nhÃ³m ngÆ°á»i dÃ¹ng khÃ¡c nhau, giÃºp báº£o vá»‡ dá»¯ liá»‡u nháº¡y cáº£m khá»i nhá»¯ng truy cáº­p trÃ¡i phÃ©p.
    - VÃ­ dá»¥: Báº¡n cÃ³ thá»ƒ táº¡o má»™t VLAN riÃªng cho bá»™ pháº­n tÃ i chÃ­nh vÃ  má»™t VLAN riÃªng cho bá»™ pháº­n nhÃ¢n sá»±, giÃºp ngÄƒn cháº·n nhÃ¢n viÃªn bá»™ pháº­n nhÃ¢n sá»± truy cáº­p vÃ o dá»¯ liá»‡u tÃ i chÃ­nh nháº¡y cáº£m.
- Cáº£i thiá»‡n hiá»‡u suáº¥t: VLAN giÃºp giáº£m táº¯c ngháº½n máº¡ng báº±ng cÃ¡ch phÃ¢n chia lÆ°u lÆ°á»£ng truy cáº­p thÃ nh cÃ¡c nhÃ³m nhá» hÆ¡n. Äiá»u nÃ y Ä‘áº·c biá»‡t há»¯u Ã­ch trong cÃ¡c máº¡ng lá»›n cÃ³ nhiá»u ngÆ°á»i dÃ¹ng vÃ  thiáº¿t bá»‹.
- Dá»… dÃ ng quáº£n lÃ½: VLAN giÃºp Ä‘Æ¡n giáº£n hÃ³a viá»‡c quáº£n lÃ½ máº¡ng báº±ng cÃ¡ch cho phÃ©p quáº£n trá»‹ viÃªn máº¡ng quáº£n lÃ½ tá»«ng VLAN riÃªng biá»‡t.
    - VÃ­ dá»¥:  Báº¡n cÃ³ thá»ƒ dá»… dÃ ng thay Ä‘á»•i cÃ i Ä‘áº·t báº£o máº­t cho má»™t VLAN cá»¥ thá»ƒ mÃ  khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n cÃ¡c VLAN khÃ¡c
- TÄƒng tÃ­nh linh hoáº¡t: VLAN giÃºp dá»… dÃ ng di chuyá»ƒn vÃ  thÃªm ngÆ°á»i dÃ¹ng vÃ o máº¡ng.
    - VÃ­ dá»¥: Náº¿u báº¡n cáº§n di chuyá»ƒn má»™t nhÃ¢n viÃªn tá»« bá»™ pháº­n nhÃ¢n sá»± sang bá»™ pháº­n tÃ i chÃ­nh, báº¡n chá»‰ cáº§n thay Ä‘á»•i VLAN cá»§a mÃ¡y tÃ­nh cá»§a há».
- Giáº£m chi phÃ­: VLAN cÃ³ thá»ƒ giÃºp giáº£m chi phÃ­ báº±ng cÃ¡ch cho phÃ©p báº¡n sá»­ dá»¥ng hiá»‡u quáº£ hÆ¡n cÃ¡c tÃ i nguyÃªn máº¡ng hiá»‡n cÃ³.
    - VÃ­ dá»¥: Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng má»™t switch Ä‘á»ƒ há»— trá»£ nhiá»u VLAN, thay vÃ¬ cáº§n nhiá»u switch cho má»—i máº¡ng con.

## á»¨ng dá»¥ng vÃ  lá»£i Ã­ch cá»§a máº¡ng VLAN
- 1. Chia tÃ¡ch máº¡ng logic
- ÄÃ¢y lÃ  á»©ng dá»¥ng cÆ¡ báº£n vÃ  quan trá»ng nháº¥t cá»§a máº¡ng VLAN. VLAN giÃºp chia tÃ¡ch máº¡ng váº­t lÃ½ thÃ nh cÃ¡c máº¡ng logic riÃªng biá»‡t, má»—i máº¡ng logic cÃ³ thá»ƒ Ä‘áº¡i diá»‡n cho má»™t bá»™ pháº­n, phÃ²ng ban hoáº·c nhÃ³m ngÆ°á»i dÃ¹ng khÃ¡c nhau trong tá»• chá»©c. Viá»‡c chia tÃ¡ch máº¡ng logic mang láº¡i nhiá»u lá»£i Ã­ch nhÆ°:
    + TÄƒng cÆ°á»ng tÃ­nh báº£o máº­t: Má»—i VLAN hoáº¡t Ä‘á»™ng nhÆ° má»™t máº¡ng riÃªng biá»‡t, giÃºp háº¡n cháº¿ truy cáº­p trÃ¡i phÃ©p giá»¯a cÃ¡c bá»™ pháº­n, phÃ²ng ban, ngÄƒn cháº·n sá»± lÃ¢y lan cá»§a virus vÃ  pháº§n má»m Ä‘á»™c háº¡i.
    + Cáº£i thiá»‡n hiá»‡u suáº¥t máº¡ng: Viá»‡c chia tÃ¡ch lÆ°u lÆ°á»£ng truy cáº­p theo VLAN giÃºp giáº£m thiá»ƒu tÃ¬nh tráº¡ng táº¯c ngháº½n máº¡ng, Ä‘áº£m báº£o hiá»‡u suáº¥t máº¡ng tá»‘t hÆ¡n cho cÃ¡c á»©ng dá»¥ng quan trá»ng.
    + Dá»… dÃ ng quáº£n lÃ½: Quáº£n trá»‹ viÃªn máº¡ng cÃ³ thá»ƒ dá»… dÃ ng quáº£n lÃ½ vÃ  Ä‘iá»u khiá»ƒn lÆ°u lÆ°á»£ng truy cáº­p trong tá»«ng VLAN, giÃºp Ä‘Æ¡n giáº£n hÃ³a viá»‡c quáº£n lÃ½ máº¡ng vÃ  kháº¯c phá»¥c sá»± cá»‘.
![alt text](./images/image-4.png)

2. PhÃ¢n Ä‘oáº¡n máº¡ng
- VLAN giÃºp phÃ¢n Ä‘oáº¡n máº¡ng thÃ nh cÃ¡c vÃ¹ng riÃªng biá»‡t, má»—i vÃ¹ng cÃ³ thá»ƒ cÃ³ cÃ¡c chÃ­nh sÃ¡ch báº£o máº­t vÃ  cháº¥t lÆ°á»£ng dá»‹ch vá»¥ (QoS) riÃªng. Viá»‡c phÃ¢n Ä‘oáº¡n máº¡ng Ä‘áº·c biá»‡t há»¯u Ã­ch trong cÃ¡c mÃ´i trÆ°á»ng máº¡ng cÃ³ nhiá»u loáº¡i lÆ°u lÆ°á»£ng truy cáº­p khÃ¡c nhau, cháº³ng háº¡n nhÆ° máº¡ng vÄƒn phÃ²ng, máº¡ng VoIP, máº¡ng IoT, v.v.

3. Táº¡o máº¡ng áº£o cho cÃ¡c dá»‹ch vá»¥ Ä‘áº·c biá»‡t
- Máº¡ng VLAN cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o ra cÃ¡c máº¡ng áº£o cho cÃ¡c dá»‹ch vá»¥ Ä‘áº·c biá»‡t nhÆ° máº¡ng khÃ¡ch, máº¡ng DMZ, v.v. Viá»‡c táº¡o ra cÃ¡c máº¡ng áº£o riÃªng biá»‡t giÃºp tÄƒng cÆ°á»ng báº£o máº­t vÃ  kháº£ nÄƒng kiá»ƒm soÃ¡t cho cÃ¡c dá»‹ch vá»¥ nÃ y.

### So sÃ¡nh sá»± khÃ¡c nhau giá»¯a máº¡ng LAN vÃ  VLAN
- Máº¡ng LAN (Máº¡ng cá»¥c bá»™) lÃ  má»™t máº¡ng mÃ¡y tÃ­nh káº¿t ná»‘i cÃ¡c thiáº¿t bá»‹ trong má»™t khu vá»±c giá»›i háº¡n, nhÆ° nhÃ  á»Ÿ, vÄƒn phÃ²ng hoáº·c tÃ²a nhÃ . Máº¡ng LAN cho phÃ©p cÃ¡c thiáº¿t bá»‹ chia sáº» tÃ i nguyÃªn, cháº³ng háº¡n nhÆ° mÃ¡y in, tá»‡p vÃ  káº¿t ná»‘i internet.

- Máº¡ng VLAN (Máº¡ng cá»¥c bá»™ áº£o) lÃ  má»™t máº¡ng logic Ä‘Æ°á»£c táº¡o ra trÃªn máº¡ng LAN váº­t lÃ½. VLAN chia nhá» máº¡ng LAN thÃ nh cÃ¡c nhÃ³m logic, cho phÃ©p quáº£n lÃ½ vÃ  báº£o máº­t tá»‘t hÆ¡n. CÃ¡c thiáº¿t bá»‹ trong cÃ¹ng má»™t VLAN cÃ³ thá»ƒ giao tiáº¿p vá»›i nhau nhÆ° thá»ƒ chÃºng Ä‘Æ°á»£c káº¿t ná»‘i trá»±c tiáº¿p, ngay cáº£ khi chÃºng Ä‘Æ°á»£c káº¿t ná»‘i vá»›i cÃ¡c bá»™ chuyá»ƒn máº¡ch khÃ¡c nhau trong máº¡ng LAN váº­t lÃ½.

# Trunking
- Giáº£ sá»­ trong 1 tÃ²a nhÃ  nhiá»u táº§ng má»—i táº§ng cÃ³ nhiá»u phÃ²ng ban, má»—i phÃ²ng ban con Ä‘á»u chia thÃ nh cÃ¡c phÃ²ng nhá» nhÆ° HR,IT,SALE,â€¦. NhÆ° váº­y má»—i phÃ²ng ban sáº½ cáº§n 1 con switch, váº­y sáº½ cáº§n ráº¥t nhiá»u switch cho háº¡ táº§ng nÃ y. NhÆ°ng má»—i con switch cÃ³ khoáº£ng 24-48 port mÃ  má»—i phÃ²ng ban chá»‰ cÃ³ tá»‘i Ä‘a 10 nhÃ¢n viÃªn, Ä‘iá»u Ä‘Ã³ dáº«n Ä‘áº¿n dÆ° thá»«a port. VLAN ra Ä‘á»i Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» Ä‘Ã³.
![alt text](./images/image-7.png)
- Hiá»ƒu 1 cÃ¡ch Ä‘Æ¡n giáº£n VLAN lÃ  viá»‡c chia 1 con 1 switch váº­t lÃ½ thÃ nh nhiá»u con switch logic

## 2. CÃCH HOáº T Äá»˜NG Cá»¦A VLAN
- TH1. Khi chÆ°a chia VLAN   
![alt text](./images/image-8.png)
+ Ping tá»« PC2 => PC3 (thÃ nh cÃ´ng)
![alt text](./images/image-9.png)
- TH2. Khi Ä‘Ã£ chia VLAN
![alt text](./images/image-10.png)
+ Thá»±c hiá»‡n ping láº¡i tá»« PC2 => PC3 ( khÃ´ng thÃ nh cÃ´ng)
![alt text](./images/image-11.png)
==> Tá»« hai TH trÃªn, táº¡i sao trong cÃ¹ng 1 dáº£i máº¡ng nhÆ°ng sau khi chia Vlan xong thÃ¬ khÃ´ng thá»ƒ ping tá»« PC2 => PC3? Báº£n cháº¥t cá»§a váº¥n Ä‘á» lÃ  khi chia Vlan, tá»« con switch váº­t lÃ½ Ä‘Ã£ Ä‘Æ°á»£c chia thÃ nh hai con switch logic. LÃºc nÃ y PC2 vÃ  PC3 á»Ÿ hai dáº£i máº¡ng LAN khÃ¡c nhau, do Ä‘Ã³ khÃ´ng thá»ƒ liÃªn láº¡c vá»›i nhau.

## LÃ€M THáº¾ NÃ€O CÃC THIáº¾T Bá»Š TRÃŠN CÃC VLAN KHÃC NHAU CÃ“ THá»‚ LIÃŠN Láº C ÄÆ¯á»¢C Vá»šI NHAU.
- ChÃºng ta cÃ³ 2 cÃ¡ch Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y.
### 3.1. DÃ¹ng má»—i káº¿t ná»‘i cho tá»«ng VLan
![alt text](./images/image-12.png)
- CÃ³ nghÄ©a lÃ  má»—i VLan trÃªn cÃ¡c Switch sáº½ Ä‘Æ°á»£c káº¿t ná»‘i báº±ng cÃ¡c Ä‘Æ°á»ng dÃ¢y riÃªng biá»‡t. Giáº£ sá»­ PC3 trong VLAN 10 trong SW1 muá»‘n ping Ä‘Æ°á»£c Ä‘áº¿n PC6 trong VLAN 10 trong SW2 thÃ¬ pháº£i cÃ³ káº¿t ná»‘i váº­t lÃ½ giá»¯a SW1 vÃ  SW2 vÃ  hai cá»•ng káº¿t ná»‘i nÃ y Ä‘á»u thuá»™c VLAN10.
- Váº¥n Ä‘á» báº¯t Ä‘áº§u náº£y sinh, giáº£ sá»­ chÃºng ta cÃ³ nhiá»u hÆ¡n 2 VLAN muá»‘n liÃªn láº¡c vá»›i nhau thÃ¬ cÅ©ng sáº½ cáº§n nhiá»u Ä‘Æ°á»ng káº¿t ná»‘i váº­t lÃ½ hÆ¡n. Äiá»u nÃ y sáº½ sá»­ dá»¥ng 1 sá»‘ lÆ°á»£ng port Ä‘Ã¡ng ká»ƒ trÃªn switch vÃ  viá»‡c Ä‘áº¥u ná»‘i nhiá»u dÃ¢y giá»¯a cÃ¡c Switch nhÆ° váº­y sáº½ gÃ¢y lÃ£ng phÃ­ lá»›n. Tá»« Ä‘Ã³ dÃ¢y trunk ra Ä‘á»i Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» trÃªn.
### 3.2. Káº¿t ná»‘i Trunk( dÃ¢y Trunk)
![alt text](./images/image-13.png)
- á» trÃªn Ä‘Ã£ gá»™p 2 dÃ¢y káº¿t ná»‘i váº­t lÃ½ tá»« VLAN10 á»Ÿ SW1 Ä‘áº¿n VLAN10 á»Ÿ SW2 vÃ  VLAN20 á»Ÿ SW1 Ä‘áº¿n VLAN20 á»Ÿ SW2 thÃ nh 1 dÃ¢y trunk duy nháº¥t. TrÃªn Ä‘Æ°á»ng trunk sáº½ cho phÃ©p dá»¯ liá»‡u tá»« VLA10, VLAN20 á»Ÿ SW1 cÃ¹ng cháº¡y trÃªn Ä‘Æ°á»ng nÃ y.
- VÃ¬ ká»¹ thuáº­t Trunk cho phÃ©p nhiá»u VLan truyá»n dá»¯ liá»‡u trÃªn 1 káº¿t ná»‘i váº­t lÃ½. Váº­y giáº£ sá»­ PC3 trong VLAN10 á»Ÿ SW1 muá»‘n liÃªn há»‡ vá»›i PC6 trong VLAN10 á»Ÿ SW2, thÃ¬ lÃ m sao SW2 biáº¿t Ä‘Æ°á»£c gÃ³i tin Ä‘Æ°á»£c gá»­i Ä‘áº¿n thuá»™c VLAN nÃ o Ä‘á»ƒ chuyá»ƒn Ä‘i, do váº­y trÆ°á»›c khi chuyá»ƒn gÃ³i tin Ä‘i ngÆ°á»i ta sáº½ gÃ¡n nhÃ£n cho nÃ³ hay cÃ²n gá»i lÃ  â€œtaggingâ€. Hiá»ƒu Ä‘Æ¡n giáº£n trÃªn Ä‘Æ°á»ng Trunk chÃºng ta sáº½ sá»­ dá»¥ng má»™t chuáº©n Ä‘Ã³ng gÃ³i má»™t cÃ¡ch riÃªng biá»‡t Ä‘Ã³ lÃ  802.1Q.
- Giao thá»©c 802.1Q
![alt text](./images/image-14.png)
- ÄÃ¢y lÃ  giao thá»©c tiÃªu chuáº©n cá»§a IEEE dÃ¹ng Ä‘á»ƒ nháº­n dáº¡ng cÃ¡c VLan khi Ä‘i qua Ä‘Æ°á»ng Trunk. LÃ  giao thá»©c gÃ¡n nhÃ£n frame khi frame Ä‘i qua dÃ¢y trunk káº¿t ná»‘i giá»¯a 2 con switch hoáº·c giá»¯a switch vÃ  router. CÃ¡ch hoáº¡t Ä‘á»™ng cá»§a nÃ³ lÃ  khi SW1 chuáº©n bá»‹ Ä‘áº©y gÃ³i tin Ä‘i thÃ¬ nÃ³ sáº½ thÃªm 1 trÆ°á»ng frame tagging Ä‘á»ƒ Ä‘Ã¡nh dáº¥u xem gÃ³i tin Ä‘Ã³ thuá»™c VLAN nÃ o.
- Khi gÃ³i tin Ä‘áº¿n Ä‘Æ°á»£c SW2, SW2 sáº½ má»Ÿ gÃ³i tin ra Ä‘á»c thÃ´ng tin Ä‘Ã­ch Ä‘áº¿n vÃ  xem frame nÃ y thuá»™c vá» VLan nÃ o. Sau Ä‘Ã³ sáº½ xÃ³a Ä‘i Tagging trá»Ÿ vá» Ä‘Ãºng frame ban Ä‘áº§u. Thá»±c cháº¥t quÃ¡ trÃ¬nh 802.1Q Tagging chá»‰ xáº£y ra trÃªn Ä‘Æ°á»ng Trunk Ä‘á»ƒ phÃ¢n biá»‡t frame Ä‘Ã³ thuá»™c VLAN nÃ o. CÃ¡c PC khÃ´ng hiá»ƒu vÃ  cÅ©ng khÃ´ng quan tÃ¢m.

# Routing giá»¯a cÃ¡c VLAN
- Máº·c Ä‘á»‹nh, cÃ¡c thiáº¿t bá»‹ trong cÃ¹ng má»™t VLAN cÃ³ thá»ƒ giao tiáº¿p vá»›i nhau, nhÆ°ng giá»¯a cÃ¡c VLAN thÃ¬ khÃ´ng thá»ƒ. Routing giá»¯a VLAN giÃºp cÃ¡c thiáº¿t bá»‹ thuá»™c cÃ¡c VLAN khÃ¡c nhau cÃ³ thá»ƒ trao Ä‘á»•i dá»¯ liá»‡u thÃ´ng qua má»™t thiáº¿t bá»‹ Ä‘á»‹nh tuyáº¿n (router hoáº·c switch Layer 3).

- Giáº£ sá»­ cÃ´ng ty báº¡n cÃ³ hai phÃ²ng ban:
+ PhÃ²ng Káº¿ ToÃ¡n (VLAN 10)
    + Äá»‹a chá»‰ máº¡ng: 192.168.10.0/24
+ PhÃ²ng IT (VLAN 20)
    + Äá»‹a chá»‰ máº¡ng: 192.168.20.0/24
Má»—i phÃ²ng ban sá»­ dá»¥ng má»™t VLAN riÃªng biá»‡t Ä‘á»ƒ báº£o máº­t vÃ  quáº£n lÃ½ tá»‘t hÆ¡n. NhÆ°ng náº¿u má»™t nhÃ¢n viÃªn IT muá»‘n gá»­i file cho nhÃ¢n viÃªn Káº¿ ToÃ¡n, há» sáº½ khÃ´ng thá»ƒ giao tiáº¿p vÃ¬ VLAN máº·c Ä‘á»‹nh khÃ´ng thá»ƒ giao tiáº¿p vá»›i nhau.
===> Cáº§n má»™t thiáº¿t bá»‹ cÃ³ thá»ƒ Ä‘á»‹nh tuyáº¿n (routing) Ä‘á»ƒ truyá»n dá»¯ liá»‡u giá»¯a cÃ¡c VLAN

## Giáº£i phÃ¡p: Routing giá»¯a VLAN
### Router-on-a-stick (DÃ¹ng router Ä‘á»ƒ routing giá»¯a VLAN)
- Theo cÃ¡ch nÃ y, ta sáº½ sá»­ dá»¥ng má»™t Router vÃ  káº¿t ná»‘i vá»›i Switch qua nhiá»u cá»•ng. Má»—i cá»•ng cáº¥u hÃ¬nh cho má»™t VLAN cá»¥ thá»ƒ. CÃ¡c cá»•ng trÃªn Router sáº½ Ä‘Æ°á»£c thiáº¿t láº­p lÃ  cÃ¡c cá»•ng máº·c Ä‘á»‹nh cho cÃ¡c VLAN tÆ°Æ¡ng á»©ng Ä‘Æ°á»£c cáº¥u hÃ¬nh trÃªn Switch.
- Khi má»™t thiáº¿t bá»‹ tá»« VLAN nÃ y káº¿t ná»‘i vá»›i VLAN khÃ¡c, gÃ³i tin chuyá»ƒn tá»« thiáº¿t bá»‹ Ä‘áº¿n cá»•ng truy cáº­p káº¿t ná»‘i vá»›i Router tÆ°Æ¡ng á»©ng VLAN mÃ  thiáº¿t bá»‹ káº¿t ná»‘i. Router nháº­n Ä‘Æ°á»£c gÃ³i tin, nÃ³ kiá»ƒm tra Ä‘á»‹a chá»‰ IP Ä‘Ã­ch cá»§a gÃ³i tin vÃ  chuyá»ƒn tiáº¿p Ä‘áº¿n máº¡ng Ä‘Ã­ch báº±ng cá»•ng truy cáº­p tÆ°Æ¡ng á»©ng cá»§a VLAN Ä‘Ã­ch.
- Switch nháº­n Ä‘Æ°á»£c gÃ³i tin sáº½ chuyáº¿n tiáº¿p khung tá»›i thiáº¿t bá»‹ Ä‘Ã­ch vÃ¬ Router Ä‘Ã£ Ä‘á»•i thÃ´ng tin VLAN tá»« VLAN nguá»“n sang VLAN Ä‘Ã­ch.
- CÃ¡ch nÃ y ráº¥t Ä‘Æ¡n giáº£n nhÆ°ng yÃªu cáº§u Router pháº£i cÃ³ sá»‘ cá»•ng báº±ng vá»›i sá»‘ lÆ°á»£ng VLAN cáº¥u hÃ¬nh trÃªn Switch. Do Ä‘Ã³, náº¿u Switch cÃ³ 10 VLAN thÃ¬ Router cÅ©ng cáº§n 10 cá»•ng Ä‘á»ƒ thá»±c hiá»‡n káº¿t ná»‘i Ä‘á»‹nh tuyáº¿n dá»¯ liá»‡u. Do Ä‘Ã³, cÃ¡ch nÃ y thÆ°á»ng khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng.

# EtherChannel

## Äáº·t váº¥n Ä‘á»:
- Thiáº¿t bá»‹ Switch cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c cá»•ng Ethernet, Fast-Ethernet(FE), GigaEthernet(GE), 10 GigaEthernet(10GE) Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ cÃ¡c link. Má»—i láº§n link bá»‹ quÃ¡ táº£i ta cÃ³ thá»ƒ nÃ¢ng cáº¥p cÃ¡c Ä‘Æ°á»ng lÃªn 10 láº§n, nhÆ°ng nhÆ° váº­y sáº½ ráº¥t tá»‘n kÃ©m trong viá»‡c mua module gáº¯n vÃ o vÃ  dÃ¢y dáº«n, bÃªn cáº¡nh Ä‘Ã³, khÃ´ng pháº£i switch nÃ o cÅ©ng cÃ³ module Ä‘á»ƒ báº¡n gáº¯n cÅ©ng nhÆ° tá»‘n chi phÃ­ vá» mua dÃ¢y dáº«n.

- VÃ­ dá»¥: Ta cÃ³ hai Switch Ä‘ang káº¿t ná»‘i vá»›i nhau báº±ng cá»•ng Fast Ethernet 100 Mbit trong khi cÃ¡c PC Host káº¿t ná»‘i Switch thÃ¬ dÃ¹ng cá»•ng Fast vá»›i bÄƒng thÃ´ng 1000 Mbit. Hiá»ƒn nhiÃªn khi mÃ  PC muá»‘n truyá»n táº£i má»™t lÆ°á»£ng lá»›n dá»¯ liá»‡u hÆ¡n 100 Mbit Ä‘i thÃ¬ táº¡i Switch sáº½ xáº£y ra hiá»‡n tÆ°á»£ng ngháº½n Traffic, cÃ¡c gÃ³i tin trong hÃ ng Ä‘á»£i khi quÃ¡ ngÆ°á»¡ng Cache thi sáº½ bá»‹ Drop bá».

![alt text](./images/image-15.png)

- Khi mÃ  dá»¯ liá»‡u truyá»n táº£i quÃ¡ lá»›n Ä‘áº¿n ná»—i Ä‘Æ°á»ng truyá»n khÃ´ng Ä‘Ã¡p á»©ng Ä‘Æ°á»£c thÃ¬ thay vÃ¬ ta pháº£i nÃ¢ng cáº¥p hay mua thiáº¿t bá»‹ má»›i thÃ¬ ta sáº½ nghÄ© tá»›i viá»‡c má»Ÿ thÃªm nhiá»u káº¿t ná»‘i dÃ¢y giá»¯a cÃ¡c Switch Ä‘á»ƒ cÃ¢n báº±ng táº£i dá»¯ liá»‡u.

![alt text](./images/image-16.png)

- Ta cÃ³ thá»ƒ káº¿t ná»‘i thÃªm 3 Ä‘Æ°á»ng dÃ¢y ná»¯a giÃºp tÄƒng bÄƒng thÃ´ng cÃ¢n báº±ng táº£i lÃªn 400 Mbit.
- Tuy nhiÃªn, náº¿u chá»‰ káº¿t ná»‘i thÃªm cÃ¡c dÃ¢y mÃ  khÃ´ng cáº¥u hÃ¬nh Ä‘Ãºng, giao thá»©c Spanning Tree Protocol (STP) sáº½ nháº­n diá»‡n sá»± láº·p láº¡i (loop) vÃ  cháº·n háº§u háº¿t cÃ¡c Ä‘Æ°á»ng phá»¥ nháº±m ngÄƒn cháº·n loop, dáº«n Ä‘áº¿n chá»‰ cÃ³ má»™t link Ä‘Æ°á»£c hoáº¡t Ä‘á»™ng vÃ  cÃ¡c link cÃ²n láº¡i khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÄƒng bÄƒng thÃ´ng.

## EtherChannel

![alt text](./images/image-17.png)

- EtherChannel lÃ  má»™t ká»¹ thuáº­t nhÃ³m hai hay nhiá»u Ä‘Æ°á»ng káº¿t ná»‘i truyá»n táº£i dá»¯ liá»‡u váº­t lÃ½ (Link Aggregation) thÃ nh má»™t Ä‘Æ°á»ng áº£o duy nháº¥t (Logic) cÃ³ Port áº£o tháº­m chÃ­ cáº£ MAC áº£o nháº±m má»¥c Ä‘Ã­ch tÄƒng tá»‘c Ä‘á»™ truyá»n dá»¯ liá»‡u vÃ  tÄƒng kháº£ nÄƒng dá»± phÃ²ng (Redundancy) cho há»‡ thá»‘ng.
- CÃ´ng nghá»‡ EtherChannel cÃ³ thá»ƒ bÃ³ tá»« 2 Ä‘áº¿n 8 link FE, GE, 10GE thÃ nh 1 link logical. Khi Ä‘Ã³, switch Ä‘á»‘i xá»­ cÃ¡c port thuá»™c EtherChannel nhÆ° 1 port duy nháº¥t.
- Switch hoáº·c thiáº¿t bá»‹ á»Ÿ 2 Ä‘áº§u EtherChannel pháº£i hiá»ƒu vÃ  sá»­ dá»¥ng cÃ´ng nghá»‡ EtherChannel Ä‘á»ƒ Ä‘áº£m báº£o hoáº¡t Ä‘á»™ng Ä‘Ãºng vÃ  chá»‘ng loop. Náº¿u chá»‰ cÃ³ 1 Ä‘áº§u sá»­ dá»¥ng EtherChannel, cÃ²n Ä‘áº§u bÃªn kia khÃ´ng sá»­ dá»¥ng thÃ¬ cÃ³ thá»ƒ gÃ¢y ra loop.
- Traffic khÃ´ng pháº£i lÃºc nÃ o cÅ©ng Ä‘Æ°á»£c phÃ¢n bá»‘ Ä‘á»“ng Ä‘á»u qua cÃ¡c Ä‘Æ°á»ng link thuá»™c EtherChannel, mÃ  nÃ³ phá»¥ thuá»™c vÃ o phÆ°Æ¡ng phÃ¡p load balancing mÃ  switch sá»­ dá»¥ng vÃ  máº«u traffic trong máº¡ng.
- Náº¿u má»™t trong cÃ¡c link thuá»™c EtherChannel bá»‹ down thÃ¬ traffic sáº½ tá»± Ä‘á»™ng Ä‘Æ°á»£c chuyá»ƒn sang link khÃ¡c trong channel chá»‰ trong vÃ²ng vÃ i miliseconds. Khi link up trá»Ÿ láº¡i thÃ¬ traffic Ä‘Æ°á»£c phÃ¢n bá»‘ láº¡i nhÆ° cÅ©.

### Má»¥c Ä‘Ã­ch cá»§a EtherChannel
- TÄƒng tá»‘c Ä‘á»™ truyá»n táº£i dá»¯ liá»‡u: Báº±ng cÃ¡ch káº¿t há»£p nhiá»u Ä‘Æ°á»ng váº­t lÃ½, tá»•ng bÄƒng thÃ´ng cá»§a liÃªn káº¿t Ä‘Æ°á»£c tÄƒng lÃªn. VÃ­ dá»¥, viá»‡c bÃ³ 4 link Fast-Ethernet (má»—i link 100 Mbit/s) cÃ³ thá»ƒ cung cáº¥p má»™t tá»•ng bÄƒng thÃ´ng lÃªn tá»›i 400 Mbit/s.

- TÄƒng kháº£ nÄƒng dá»± phÃ²ng (Redundancy): Náº¿u má»™t trong cÃ¡c Ä‘Æ°á»ng váº­t lÃ½ gáº·p sá»± cá»‘ (bá»‹ down), cÃ¡c Ä‘Æ°á»ng cÃ²n láº¡i váº«n Ä‘áº£m báº£o viá»‡c truyá»n dá»¯ 
liá»‡u, giÃºp duy trÃ¬ tÃ­nh liÃªn tá»¥c cá»§a káº¿t ná»‘i. ThÃ´ng thÆ°á»ng, viá»‡c chuyá»ƒn Ä‘á»•i sáº½ diá»…n ra chá»‰ trong vÃ i mili giÃ¢y.    

### CÃ¡c Ä‘áº·c Ä‘iá»ƒm ká»¹ thuáº­t
- Sá»‘ lÆ°á»£ng link: EtherChannel cÃ³ thá»ƒ "bÃ³" tá»« 2 Ä‘áº¿n 8 Ä‘Æ°á»ng káº¿t ná»‘i váº­t lÃ½ (FE, GE, 10GE) thÃ nh má»™t liÃªn káº¿t logic.
- QuÃ¡ trÃ¬nh tÃ­ch há»£p: Sau khi cÃ¡c cá»•ng Ä‘Æ°á»£c cáº¥u hÃ¬nh thÃ nh EtherChannel, thiáº¿t bá»‹ (vÃ­ dá»¥: switch) sáº½ xá»­ lÃ½ toÃ n bá»™ cÃ¡c cá»•ng Ä‘Ã³ nhÆ° thá»ƒ nÃ³ lÃ  má»™t cá»•ng Ä‘Æ¡n láº». Äiá»u nÃ y giÃºp viá»‡c quáº£n lÃ½ vÃ  thiáº¿t láº­p káº¿t ná»‘i trá»Ÿ nÃªn Ä‘Æ¡n giáº£n hÆ¡n vÃ  trÃ¡nh cÃ¡c xung Ä‘á»™t liÃªn quan Ä‘áº¿n giao thá»©c Ä‘á»‹nh tuyáº¿n hoáº·c chuyá»ƒn máº¡ch.
- YÃªu cáº§u tÆ°Æ¡ng thÃ­ch: Cáº£ hai Ä‘áº§u cá»§a EtherChannel (vÃ­ dá»¥: switch ná»‘i vá»›i switch hoáº·c switch ná»‘i vá»›i router) Ä‘á»u pháº£i há»— trá»£ vÃ  Ä‘Æ°á»£c cáº¥u hÃ¬nh sá»­ dá»¥ng cÃ´ng nghá»‡ EtherChannel. Náº¿u chá»‰ cÃ³ má»™t Ä‘áº§u sá»­ dá»¥ng EtherChannel mÃ  Ä‘áº§u kia khÃ´ng há»— trá»£, cÃ³ thá»ƒ gÃ¢y ra cÃ¡c hiá»‡n tÆ°á»£ng khÃ´ng mong muá»‘n nhÆ° loop (vÃ²ng láº·p khÃ´ng kiá»ƒm soÃ¡t).
- PhÃ¢n bá»• traffic (Load Balancing): Traffic khÃ´ng nháº¥t thiáº¿t pháº£i Ä‘Æ°á»£c chia Ä‘á»u hoÃ n háº£o trÃªn táº¥t cáº£ cÃ¡c Ä‘Æ°á»ng link trong EtherChannel. PhÃ¢n bá»• lÆ°u lÆ°á»£ng phá»¥ thuá»™c vÃ o:
    + Thuáº­t toÃ¡n cÃ¢n báº±ng táº£i mÃ  switch sá»­ dá»¥ng (vÃ­ dá»¥: dá»±a trÃªn Ä‘á»‹a chá»‰ MAC, Ä‘á»‹a chá»‰ IP, cá»•ng TCP/UDP, â€¦).
    + Máº«u lÆ°u lÆ°á»£ng cá»¥ thá»ƒ trong máº¡ng.
- Äiá»u nÃ y cÃ³ nghÄ©a lÃ  trong má»™t sá»‘ trÆ°á»ng há»£p, má»™t sá»‘ Ä‘Æ°á»ng link cÃ³ thá»ƒ pháº£i gÃ¡nh vÃ¡c nhiá»u traffic hÆ¡n so vá»›i cÃ¡c link khÃ¡c.
- TÃ­nh nÄƒng tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i: Khi má»™t trong cÃ¡c link thuá»™c EtherChannel bá»‹ há»ng hoáº·c down, há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng chuyá»ƒn traffic sang cÃ¡c Ä‘Æ°á»ng cÃ²n láº¡i. QuÃ¡ trÃ¬nh nÃ y diá»…n ra ráº¥t nhanh (chá»‰ vÃ i mili giÃ¢y) Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh liÃªn tá»¥c cá»§a káº¿t ná»‘i. Khi Ä‘Æ°á»ng link gáº·p sá»± cá»‘ Ä‘Æ°á»£c khÃ´i phá»¥c, quÃ¡ trÃ¬nh cÃ¢n báº±ng láº¡i Ä‘Æ°á»£c thá»±c hiá»‡n Ä‘á»ƒ Ä‘Æ°a traffic vá» tráº¡ng thÃ¡i phÃ¢n bá»‘ ban Ä‘áº§u.

### Táº¡i sao cáº§n pháº£i cáº¥u hÃ¬nh EtherChannel trÃªn cáº£ hai switch vÃ  cÃ¡ch loop cÃ³ thá»ƒ xáº£y ra náº¿u cáº¥u hÃ¬nh khÃ´ng Ä‘á»“ng bá»™
- Giáº£ sá»­ cÃ³ 2 switch káº¿t ná»‘i vá»›i nhau:
    + Báº¡n cÃ³ Switch A vÃ  Switch B.
    + Hai switch nÃ y Ä‘Æ°á»£c káº¿t ná»‘i vá»›i nhau báº±ng 2 dÃ¢y cÃ¡p qua cá»•ng GE0/1 vÃ  GE0/2.
- Khi Cáº¢ HAI switch Ä‘Æ°á»£c cáº¥u hÃ¬nh EtherChannel:
    + TrÃªn Switch A, ta gom GE0/1 vÃ  GE0/2 thÃ nh má»™t nhÃ³m EtherChannel (Port-channel1).
    + TrÃªn Switch B, ta cÅ©ng gom GE0/1 vÃ  GE0/2 vÃ o má»™t nhÃ³m EtherChannel (Port-channel1).
    ğŸ”¹ Khi Ä‘Ã³, cáº£ hai switch sáº½ coi 2 Ä‘Æ°á»ng cÃ¡p lÃ  má»™t Ä‘Æ°á»ng duy nháº¥t (Link Aggregation).
    ğŸ”¹ Spanning Tree Protocol (STP) chá»‰ xem Ä‘Ã¢y lÃ  má»™t káº¿t ná»‘i duy nháº¥t, do Ä‘Ã³ khÃ´ng cÃ³ loop.
    ğŸ”¹ EtherChannel sáº½ quáº£n lÃ½ load balancing vÃ  dá»± phÃ²ng náº¿u má»™t Ä‘Æ°á»ng cÃ¡p bá»‹ lá»—i.
    âœ… Káº¿t quáº£: Hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh, khÃ´ng cÃ³ loop.
#### Khi CHá»ˆ Má»˜T bÃªn cáº¥u hÃ¬nh EtherChannel (GÃ¢y ra loop)
- TrÆ°á»ng há»£p: Switch A cáº¥u hÃ¬nh EtherChannel, nhÆ°ng Switch B khÃ´ng cáº¥u hÃ¬nh EtherChannel
    + Switch A: Gom GE0/1 vÃ  GE0/2 thÃ nh má»™t Ä‘Æ°á»ng duy nháº¥t (Port-channel1).
    + Switch B: Váº«n coi GE0/1 vÃ  GE0/2 lÃ  hai cá»•ng Ä‘á»™c láº­p.
    
ğŸ”¸ Äiá»u gÃ¬ xáº£y ra?
+ Switch A gá»­i gÃ³i tin qua Port-channel1, há»‡ thá»‘ng load balance vÃ  cÃ³ thá»ƒ gá»­i gÃ³i tin qua GE0/1 hoáº·c GE0/2.
+ Switch B láº¡i nháº­n 2 Ä‘Æ°á»ng Ä‘á»™c láº­p, nÃªn gÃ³i tin cÃ³ thá»ƒ Ä‘Æ°á»£c láº·p láº¡i khi truyá»n ngÆ°á»£c láº¡i Switch A.
+ Switch A tiáº¿p tá»¥c gá»­i gÃ³i tin Ä‘i qua EtherChannel cá»§a nÃ³, khiáº¿n gÃ³i tin bá»‹ quay vÃ²ng liÃªn tá»¥c.
+ VÃ¬ STP trÃªn Switch B váº«n coi Ä‘Ã¢y lÃ  hai cá»•ng Ä‘á»™c láº­p, nÃ³ khÃ´ng nháº­n diá»‡n loop vÃ  khÃ´ng cháº·n bá»›t má»™t cá»•ng nÃ o.
ğŸ”¥ Káº¿t quáº£: Loop xáº£y ra!

- Giáº£i thÃ­ch loop theo tá»«ng bÆ°á»›c Ä‘Æ¡n giáº£n
    + Switch A gá»­i má»™t gÃ³i tin broadcast (vÃ­ dá»¥: ARP Request) vÃ o Port-channel1.
    + VÃ¬ EtherChannel load balancing, gÃ³i tin cÃ³ thá»ƒ Ä‘i qua GE0/1 hoáº·c GE0/2.
    + Switch B nháº­n Ä‘Æ°á»£c gÃ³i tin trÃªn cáº£ GE0/1 vÃ  GE0/2 vÃ¬ nÃ³ khÃ´ng gom 2 port nÃ y láº¡i.
    + Switch B khÃ´ng nháº­n ra ráº±ng Ä‘Ã¢y lÃ  2 Ä‘Æ°á»ng cá»§a cÃ¹ng má»™t nhÃ³m, nÃªn nÃ³ sáº½ phÃ¡t láº¡i gÃ³i tin ra cáº£ hai cá»•ng.
    + Switch A láº¡i nháº­n gÃ³i tin nÃ y vÃ  tiáº¿p tá»¥c load balance, gá»­i láº¡i gÃ³i tin qua Port-channel1.
    + Chu ká»³ nÃ y tiáº¿p tá»¥c láº·p láº¡i vÃ´ háº¡n, gÃ¢y ra loop trong máº¡ng.

# Bonding
- Bonding (cÃ²n gá»i lÃ  NIC teaming trÃªn má»™t sá»‘ há»‡ thá»‘ng) lÃ  ká»¹ thuáº­t gá»™p nhiá»u card máº¡ng (Network Interface Cards â€“ NIC) thÃ nh má»™t liÃªn káº¿t logic duy nháº¥t trÃªn há»‡ Ä‘iá»u hÃ nh Linux (vÃ  má»™t sá»‘ há»‡ Ä‘iá»u hÃ nh khÃ¡c).
- NÃ³ tÆ°Æ¡ng tá»± nhÆ° EtherChannel trÃªn switch, nhÆ°ng Bonding thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng trÃªn mÃ¡y chá»§ (server) hoáº·c Linux host thay vÃ¬ trÃªn thiáº¿t bá»‹ switch.
- Má»¥c tiÃªu cá»§a bonding:
    + TÄƒng bÄƒng thÃ´ng: Sá»­ dá»¥ng nhiá»u card Ä‘á»ƒ tá»•ng há»£p bÄƒng thÃ´ng.
    + Dá»± phÃ²ng: Náº¿u má»™t card máº¡ng gáº·p lá»—i, cÃ¡c card khÃ¡c sáº½ tiáº¿p tá»¥c truyá»n nháº­n dá»¯ liá»‡u.
- VÃ­ dá»¥:
    + Náº¿u cÃ³ 2 cá»•ng 1 Gbps, bonding giÃºp táº¡o thÃ nh má»™t link áº£o cÃ³ tá»‘c Ä‘á»™ 2 Gbps.
    + Náº¿u 1 trong 2 Ä‘Æ°á»ng bá»‹ há»ng, Ä‘Æ°á»ng cÃ²n láº¡i váº«n hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng.


## VÃ­ dá»¥ thá»±c táº¿ vá» Bonding
- Giáº£ sá»­ báº¡n cÃ³ má»™t mÃ¡y chá»§ Linux vá»›i 2 card máº¡ng:
    + eth0 (1 Gbps)
    + eth1 (1 Gbps)
Báº¡n muá»‘n:
    + TÄƒng bÄƒng thÃ´ng lÃªn 2 Gbps báº±ng cÃ¡ch gá»™p hai card máº¡ng nÃ y.
    + Náº¿u eth0 bá»‹ lá»—i, toÃ n bá»™ lÆ°u lÆ°á»£ng sáº½ tá»± Ä‘á»™ng chuyá»ƒn sang eth1 Ä‘á»ƒ Ä‘áº£m báº£o máº¡ng khÃ´ng bá»‹ giÃ¡n Ä‘oáº¡n.
ğŸ“Œ Giáº£i phÃ¡p: DÃ¹ng Bonding Ä‘á»ƒ gá»™p eth0 + eth1 thÃ nh má»™t cá»•ng áº£o bond0.
- Sau khi cáº¥u hÃ¬nh, há»‡ thá»‘ng sáº½ coi bond0 lÃ  má»™t cá»•ng máº¡ng duy nháº¥t thay vÃ¬ hai cá»•ng riÃªng láº».

# Routing
## TÃ¬m hiá»ƒu vá» giao thá»©c Ä‘á»‹nh tuyáº¿n, táº­p trung vÃ o Ä‘á»‹nh tuyáº¿n tÄ©nh.
- Äá»‹nh tuyáº¿n (Routing) lÃ  quÃ¡ trÃ¬nh xÃ¡c Ä‘á»‹nh Ä‘Æ°á»ng Ä‘i cá»§a gÃ³i tin tá»« máº¡ng nguá»“n Ä‘áº¿n máº¡ng Ä‘Ã­ch. Trong há»‡ thá»‘ng máº¡ng, cÃ³ hai loáº¡i Ä‘á»‹nh tuyáº¿n chÃ­nh:
    + Äá»‹nh tuyáº¿n tÄ©nh (Static Routing) â€“ Cáº¥u hÃ¬nh thá»§ cÃ´ng, chá»‰ Ä‘á»‹nh Ä‘Æ°á»ng Ä‘i cá»‘ Ä‘á»‹nh.
    + Äá»‹nh tuyáº¿n Ä‘á»™ng (Dynamic Routing) â€“ DÃ¹ng cÃ¡c giao thá»©c Ä‘á»‹nh tuyáº¿n Ä‘á»ƒ tá»± Ä‘á»™ng cáº­p nháº­t Ä‘Æ°á»ng Ä‘i.
## Äá»‹nh tuyáº¿n tÄ©nh (Static Routing)
+ Äá»‹nh tuyáº¿n tÄ©nh lÃ  khi ngÆ°á»i quáº£n trá»‹ máº¡ng tá»± cáº¥u hÃ¬nh thá»§ cÃ´ng cÃ¡c Ä‘Æ°á»ng Ä‘i cho gÃ³i tin.
+ KhÃ´ng thay Ä‘á»•i tá»± Ä‘á»™ng khi cÃ³ sá»± cá»‘ máº¡ng, cáº§n cáº¥u hÃ¬nh láº¡i náº¿u cÃ³ thay Ä‘á»•i.
+ PhÃ¹ há»£p cho máº¡ng nhá» hoáº·c Ä‘á»‹nh tuyáº¿n Ä‘Æ¡n giáº£n.

- Giáº£ sá»­ báº¡n cÃ³ hai máº¡ng:
    + Máº¡ng 1: 192.168.1.0/24 (PC-1: 192.168.1.10)
    + Máº¡ng 2: 192.168.2.0/24 (PC-2: 192.168.2.20)
- Router trung gian cÃ³:
    + eth0: 192.168.1.1
    + eth1: 192.168.2.1
ğŸ“Œ Má»¥c tiÃªu:
    + PC-1 (192.168.1.10) muá»‘n giao tiáº¿p vá»›i PC-2 (192.168.2.20).
    + VÃ¬ hai mÃ¡y thuá»™c hai máº¡ng khÃ¡c nhau, gÃ³i tin pháº£i Ä‘i qua router.

## TÃ¬m hiá»ƒu routing table, cáº¥u hÃ¬nh Ä‘á»‹nh tuyáº¿n trÃªn Linux
### Routing Table lÃ  gÃ¬?
- Routing Table lÃ  báº£ng Ä‘á»‹nh tuyáº¿n chá»©a cÃ¡c quy táº¯c giÃºp há»‡ thá»‘ng quyáº¿t Ä‘á»‹nh gá»­i gÃ³i tin Ä‘i Ä‘Ã¢u dá»±a trÃªn Ä‘á»‹a chá»‰ Ä‘Ã­ch (destination IP).

```bash
root@ubuntu-22-04:~# ip route show
default via 192.168.254.2 dev ens33 proto static 
192.168.254.0/24 dev ens33 proto kernel scope link src 192.168.254.10 

# default via 192.168.254.2 dev ens33 proto static
# ÄÃ¢y lÃ  default route (cá»•ng máº·c Ä‘á»‹nh) cá»§a há»‡ thá»‘ng.
# default â†’ Táº¥t cáº£ cÃ¡c gÃ³i tin khÃ´ng cÃ³ route cá»¥ thá»ƒ sáº½ Ä‘Æ°á»£c gá»­i theo route nÃ y.
# via 192.168.254.2 â†’ GÃ³i tin sáº½ Ä‘i qua gateway 192.168.254.2.
# dev ens33 â†’ GÃ³i tin sáº½ Ä‘i qua card máº¡ng ens33.
# proto static â†’ ÄÃ¢y lÃ  route tÄ©nh (static route), Ä‘Æ°á»£c cáº¥u hÃ¬nh thá»§ cÃ´ng.
# ==> Má»i gÃ³i tin Ä‘i ra ngoÃ i (khÃ´ng thuá»™c máº¡ng ná»™i bá»™) sáº½ Ä‘Æ°á»£c chuyá»ƒn Ä‘áº¿n 192.168.254.2 (gateway).

# 192.168.254.0/24 dev ens33 proto kernel scope link src 192.168.254.10
# ğŸ‘‰ ÄÃ¢y lÃ  route ná»™i bá»™ cá»§a máº¡ng 192.168.254.0/24.
# 192.168.254.0/24 â†’ ÄÃ¢y lÃ  máº¡ng ná»™i bá»™ (Subnet Mask: 255.255.255.0).
# dev ens33 â†’ Giao diá»‡n máº¡ng ens33 káº¿t ná»‘i trá»±c tiáº¿p vá»›i máº¡ng nÃ y.
# proto kernel â†’ Route nÃ y Ä‘Æ°á»£c táº¡o tá»± Ä‘á»™ng bá»Ÿi kernel khi thiáº¿t láº­p IP.
# scope link â†’ Route chá»‰ cÃ³ hiá»‡u lá»±c trong máº¡ng ná»™i bá»™ (khÃ´ng cáº§n gateway).
# src 192.168.254.10 â†’ Khi gá»­i gÃ³i tin tá»« máº¡ng nÃ y, há»‡ thá»‘ng sáº½ sá»­ dá»¥ng 192.168.254.10 lÃ m Ä‘á»‹a chá»‰ nguá»“n. 
# ==>  Má»i gÃ³i tin gá»­i Ä‘áº¿n máº¡ng 192.168.254.0/24 sáº½ Ä‘i trá»±c tiáº¿p qua ens33, mÃ  khÃ´ng cáº§n qua gateway.

# ğŸ“Œ Káº¿t luáº­n
# Náº¿u gÃ³i tin cÃ³ Ä‘Ã­ch lÃ  192.168.254.X, nÃ³ sáº½ Ä‘i tháº³ng qua interface ens33.
# Náº¿u gÃ³i tin cÃ³ Ä‘Ã­ch lÃ  máº¡ng khÃ¡c (vÃ­ dá»¥: 8.8.8.8), nÃ³ sáº½ Ä‘i qua gateway 192.168.254.2.

default via 192.168.1.1 dev ens33 proto static 
192.168.1.0/24 dev ens33 proto kernel scope link src 192.168.1.10
192.168.2.0/24 via 192.168.1.1 dev ens33

# default via 192.168.1.1 dev ens33 â†’ Táº¥t cáº£ gÃ³i tin khÃ´ng biáº¿t Ä‘i Ä‘Ã¢u sáº½ Ä‘i qua 192.168.1.1 (default gateway).
# 192.168.1.0/24 dev ens33 â†’ Máº¡ng 192.168.1.0/24 káº¿t ná»‘i trá»±c tiáº¿p qua card máº¡ng ens33.
# 192.168.2.0/24 via 192.168.1.1 dev ens33 â†’ Náº¿u gá»­i gÃ³i tin Ä‘áº¿n 192.168.2.0/24, nÃ³ sáº½ Ä‘i qua 192.168.1.1.



root@ubuntu-22-04:~# route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         192.168.254.2   0.0.0.0         UG    0      0        0 ens33
192.168.254.0   0.0.0.0         255.255.255.0   U     0      0        0 ens33

```

```bash
# Cáº¥u hÃ¬nh Ä‘á»‹nh tuyáº¿n trÃªn Linux
# ThÃªm route tÄ©nh (Static Route)
# VÃ­ dá»¥: Báº¡n cÃ³ 2 máº¡ng:
# - Máº¡ng 1: 192.168.1.0/24 (Server1)
# - Máº¡ng 2: 192.168.2.0/24 (Server2)
# - Router (Linux) cÃ³ IP: 192.168.1.1 vÃ  192.168.2.1

# TrÃªn Server1 (192.168.1.10), thÃªm route Ä‘áº¿n máº¡ng 192.168.2.0/24:
ip route add 192.168.2.0/24 via 192.168.1.1 dev ens33
# TrÃªn Server2 (192.168.2.10), thÃªm route Ä‘áº¿n máº¡ng 192.168.1.0/24:
ip route add 192.168.1.0/24 via 192.168.2.1 dev ens33
# Giáº£i thÃ­ch:
# Khi Server1 muá»‘n gá»­i gÃ³i tin Ä‘áº¿n 192.168.2.0/24, nÃ³ sáº½ gá»­i Ä‘áº¿n 192.168.1.1 (Router).
# Khi Server2 muá»‘n gá»­i gÃ³i tin Ä‘áº¿n 192.168.1.0/24, nÃ³ sáº½ gá»­i Ä‘áº¿n 192.168.2.1 (Router).

# Kiá»ƒm tra báº±ng lá»‡nh
ip route show
# XÃ³a route tÄ©nh
ip route del 192.168.2.0/24 via 192.168.1.1 dev ens33



```
- LÆ°u Route VÄ©nh Viá»…n

```/etc/netplan/01-netcfg.yaml
network:
  ethernets:
    ens33:
      dhcp4: no
      addresses:
        - 192.168.1.10/24
      routes:
        - to: 192.168.2.0/24
          via: 192.168.1.1
```

```bash
sudo netplan apply
```

- CÃ¡c lá»‡nh nÃ y lÃ  lá»‡nh Ä‘á»‹nh tuyáº¿n tÄ©nh (static route) trong Linux, giÃºp thiáº¿t láº­p Ä‘Æ°á»ng Ä‘i cho cÃ¡c gÃ³i tin khi mÃ¡y tÃ­nh hoáº·c router khÃ´ng biáº¿t sáºµn Ä‘Æ°á»ng Ä‘áº¿n máº¡ng Ä‘Ã­ch.



# Náº¯m cháº¯c giao thá»©c chÃ­nh: HTTP, DNS, FTP, SSH, DHCP, ARP, SNMP, SMTP

## HTTP
ğŸ“Œ Chá»©c nÄƒng:
    + DÃ¹ng Ä‘á»ƒ truyá»n táº£i dá»¯ liá»‡u giá»¯a trÃ¬nh duyá»‡t web vÃ  mÃ¡y chá»§ web.
    + Hoáº¡t Ä‘á»™ng theo mÃ´ hÃ¬nh Client-Server (mÃ¡y khÃ¡ch - mÃ¡y chá»§).
    + PhiÃªn báº£n báº£o máº­t: HTTPS (HTTP + SSL/TLS).
ğŸ“Œ VÃ­ dá»¥:
    + Khi báº¡n truy cáº­p https://example.com, trÃ¬nh duyá»‡t sáº½ gá»­i yÃªu cáº§u HTTP Ä‘áº¿n mÃ¡y chá»§ vÃ  nháº­n vá» ná»™i dung trang web

## DNS (Domain Name System) - Há»‡ thá»‘ng phÃ¢n giáº£i tÃªn miá»n
ğŸ“Œ Chá»©c nÄƒng:
    + Chuyá»ƒn Ä‘á»•i tÃªn miá»n (vd: google.com) thÃ nh Ä‘á»‹a chá»‰ IP (vd: 142.250.183.206).
    + GiÃºp con ngÆ°á»i dá»… nhá»› tÃªn trang web thay vÃ¬ pháº£i nhá»› Ä‘á»‹a chá»‰ IP.
ğŸ“Œ VÃ­ dá»¥:
    + Khi báº¡n nháº­p google.com, mÃ¡y tÃ­nh sáº½ gá»­i yÃªu cáº§u DNS Ä‘á»ƒ láº¥y Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y chá»§ Google.

## FTP (File Transfer Protocol) - Giao thá»©c truyá»n táº£i táº­p tin
ğŸ“Œ Chá»©c nÄƒng:
    + DÃ¹ng Ä‘á»ƒ táº£i lÃªn/táº£i xuá»‘ng file giá»¯a mÃ¡y khÃ¡ch (Client) vÃ  mÃ¡y chá»§ (Server).
    + Cáº§n cÃ³ username/password Ä‘á»ƒ xÃ¡c thá»±c.
ğŸ“Œ VÃ­ dá»¥:
    + DÃ¹ng FileZilla hoáº·c lá»‡nh ftp Ä‘á»ƒ káº¿t ná»‘i vÃ  táº£i file tá»« má»™t mÃ¡y chá»§ FTP.
## SSH (Secure Shell) - Giao thá»©c káº¿t ná»‘i tá»« xa an toÃ n
ğŸ“Œ Chá»©c nÄƒng:
    + DÃ¹ng Ä‘á»ƒ Ä‘iá»u khiá»ƒn mÃ¡y chá»§ tá»« xa má»™t cÃ¡ch báº£o máº­t qua Ä‘Æ°á»ng truyá»n mÃ£ hÃ³a.
    + Thay tháº¿ cho Telnet (khÃ´ng cÃ³ mÃ£ hÃ³a).
ğŸ“Œ VÃ­ dá»¥:
    + Káº¿t ná»‘i SSH vÃ o mÃ¡y chá»§ báº±ng lá»‡nh: ssh user@192.168.1.10

## DHCP (Dynamic Host Configuration Protocol) - Giao thá»©c cáº¥p phÃ¡t Ä‘á»‹a chá»‰ IP tá»± Ä‘á»™ng
ğŸ“Œ Chá»©c nÄƒng:
    + Cáº¥p phÃ¡t Ä‘á»‹a chá»‰ IP tá»± Ä‘á»™ng cho cÃ¡c thiáº¿t bá»‹ trong máº¡ng.
    + GiÃºp trÃ¡nh xung Ä‘á»™t IP khi nhiá»u thiáº¿t bá»‹ káº¿t ná»‘i vÃ o máº¡ng.
ğŸ“Œ VÃ­ dá»¥: Khi báº¡n káº¿t ná»‘i Wi-Fi, Router sáº½ cáº¥p phÃ¡t má»™t Ä‘á»‹a chá»‰ IP Ä‘á»™ng cho báº¡n qua DHCP.

## ARP (Address Resolution Protocol) - Giao thá»©c phÃ¢n giáº£i Ä‘á»‹a chá»‰
ğŸ“Œ Chá»©c nÄƒng:
    + Chuyá»ƒn Ä‘á»•i Ä‘á»‹a chá»‰ IP thÃ nh Ä‘á»‹a chá»‰ MAC Ä‘á»ƒ cÃ¡c thiáº¿t bá»‹ trong máº¡ng LAN cÃ³ thá»ƒ giao tiáº¿p vá»›i nhau.
ğŸ“Œ VÃ­ dá»¥:
    + Khi mÃ¡y tÃ­nh muá»‘n gá»­i dá»¯ liá»‡u Ä‘áº¿n 192.168.1.2, nÃ³ dÃ¹ng ARP Ä‘á»ƒ tÃ¬m Ä‘á»‹a chá»‰ MAC cá»§a thiáº¿t bá»‹ Ä‘Ã³.

## SNMP (Simple Network Management Protocol) - Giao thá»©c quáº£n lÃ½ máº¡ng Ä‘Æ¡n giáº£n
ğŸ“Œ Chá»©c nÄƒng:
    + DÃ¹ng Ä‘á»ƒ giÃ¡m sÃ¡t vÃ  quáº£n lÃ½ cÃ¡c thiáº¿t bá»‹ máº¡ng nhÆ° Router, Switch, Server,...
    + Thu tháº­p thÃ´ng tin nhÆ° tá»‘c Ä‘á»™ máº¡ng, tráº¡ng thÃ¡i CPU, dung lÆ°á»£ng RAM,...
ğŸ“Œ VÃ­ dá»¥: Pháº§n má»m giÃ¡m sÃ¡t Zabbix, Nagios dÃ¹ng SNMP Ä‘á»ƒ thu tháº­p dá»¯ liá»‡u tá»« cÃ¡c thiáº¿t bá»‹ máº¡ng.

## SMTP (Simple Mail Transfer Protocol) - Giao thá»©c gá»­i email
ğŸ“Œ Chá»©c nÄƒng: DÃ¹ng Ä‘á»ƒ gá»­i email tá»« mÃ¡y khÃ¡ch lÃªn mÃ¡y chá»§ email.
KhÃ´ng dÃ¹ng Ä‘á»ƒ nháº­n email (POP3, IMAP má»›i lÃ  giao thá»©c nháº­n email).
ğŸ“Œ VÃ­ dá»¥: Khi báº¡n gá»­i email qua Gmail, mÃ¡y chá»§ Gmail dÃ¹ng SMTP Ä‘á»ƒ gá»­i email Ä‘áº¿n mÃ¡y chá»§ Ä‘Ã­ch.

# TÃ¬m hiá»ƒu cÆ¡ cháº¿ NAT, cÃ¡c loáº¡i NAT

## 1. NAT lÃ  gÃ¬?
- Nat lÃ  viáº¿t táº¯t cá»§a tá»« gÃ¬? NAT (viáº¿t táº¯t cá»§a cá»¥m tá»« tiáº¿ng Anh Network Address Translation) lÃ  má»™t ká»¹ thuáº­t trong máº¡ng mÃ¡y tÃ­nh cho phÃ©p chuyá»ƒn Ä‘á»•i Ä‘á»‹a chá»‰ IP giá»¯a cÃ¡c thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™ vÃ  máº¡ng bÃªn ngoÃ i. NÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ã¡nh xáº¡ Ä‘á»‹a chá»‰ IP riÃªng (private IP) cá»§a cÃ¡c thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™ sang má»™t Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng (public IP) khi chÃºng truy cáº­p internet.
- Äiá»u nÃ y giÃºp tiáº¿t kiá»‡m Ä‘á»‹a chá»‰ IP vÃ  tÄƒng cÆ°á»ng báº£o máº­t cho máº¡ng ná»™i bá»™ vÃ¬ cÃ¡c thiáº¿t bá»‹ bÃªn ngoÃ i khÃ´ng thá»ƒ trá»±c tiáº¿p truy cáº­p vÃ o cÃ¡c thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™.
- NAT thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng trong cÃ¡c router hoáº·c gateway Ä‘á»ƒ cho phÃ©p nhiá»u thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™ chia sáº» má»™t Ä‘á»‹a chá»‰ IP cÃ´ng khai duy nháº¥t.

## 2. NguyÃªn lÃ½ hoáº¡t Ä‘á»™ng cá»§a NAT nhÆ° tháº¿ nÃ o?
- NAT hoáº¡t Ä‘á»™ng dá»±a trÃªn viá»‡c thay Ä‘á»•i Ä‘á»‹a chá»‰ IP vÃ  cá»•ng cá»§a cÃ¡c gÃ³i tin khi chÃºng Ä‘i qua router. NÃ³ giÃºp che giáº¥u cÃ¡c Ä‘á»‹a chá»‰ IP ná»™i bá»™ vá»›i bÃªn ngoÃ i, Ä‘á»“ng thá»i tiáº¿t kiá»‡m Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng báº±ng cÃ¡ch cho phÃ©p nhiá»u thiáº¿t bá»‹ sá»­ dá»¥ng chung má»™t Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng.
- QuÃ¡ trÃ¬nh nÃ y thÆ°á»ng diá»…n ra táº¡i router hoáº·c firewall Ä‘á»ƒ quáº£n lÃ½ káº¿t ná»‘i giá»¯a máº¡ng ná»™i bá»™ vÃ  internet, cá»¥ thá»ƒ nhÆ° sau:
- Gá»­i gÃ³i tin tá»« máº¡ng ná»™i bá»™ ra ngoÃ i:
    + Khi má»™t thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™ muá»‘n truy cáº­p internet, nÃ³ sáº½ gá»­i má»™t gÃ³i tin Ä‘áº¿n router NAT.
    + GÃ³i tin nÃ y chá»©a Ä‘á»‹a chá»‰ IP nguá»“n lÃ  Ä‘á»‹a chá»‰ IP riÃªng cá»§a thiáº¿t bá»‹, vÃ  Ä‘á»‹a chá»‰ IP Ä‘Ã­ch lÃ  Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng cá»§a mÃ¡y chá»§ mÃ  thiáº¿t bá»‹ muá»‘n káº¿t ná»‘i.
- Thay Ä‘á»•i Ä‘á»‹a chá»‰ IP nguá»“n:
    + Router NAT nháº­n gÃ³i tin vÃ  thay Ä‘á»•i Ä‘á»‹a chá»‰ IP nguá»“n tá»« Ä‘á»‹a chá»‰ IP riÃªng thÃ nh Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng cá»§a router (hoáº·c má»™t Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng Ä‘Æ°á»£c Ã¡nh xáº¡).
    + ÄÃ´i khi, NAT cÅ©ng thay Ä‘á»•i cáº£ cá»•ng nguá»“n cá»§a gÃ³i tin Ä‘á»ƒ Ä‘áº£m báº£o sá»± phÃ¢n biá»‡t giá»¯a cÃ¡c káº¿t ná»‘i khÃ¡c nhau sá»­ dá»¥ng chung má»™t Ä‘á»‹a chá»‰ IP public. ÄÃ¢y lÃ  quÃ¡ trÃ¬nh Port Address Translation (PAT).
    + Sau Ä‘Ã³, router gá»­i gÃ³i tin ra ngoÃ i internet vá»›i Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng má»›i.
- LÆ°u báº£ng NAT:
    + Router NAT sáº½ lÆ°u thÃ´ng tin Ã¡nh xáº¡ giá»¯a Ä‘á»‹a chá»‰ IP vÃ  cá»•ng nguá»“n ban Ä‘áº§u vá»›i Ä‘á»‹a chá»‰ IP vÃ  cá»•ng nguá»“n má»›i trong báº£ng NAT.
    + Báº£ng nÃ y giÃºp router biáº¿t cÃ¡ch chuyá»ƒn tiáº¿p gÃ³i tin pháº£n há»“i tá»« internet vá» Ä‘Ãºng thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™.
- Nháº­n gÃ³i tin pháº£n há»“i:
    + Khi mÃ¡y chá»§ bÃªn ngoÃ i pháº£n há»“i, gÃ³i tin sáº½ Ä‘Æ°á»£c gá»­i vá» Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng cá»§a router NAT.
    + Router NAT kiá»ƒm tra báº£ng NAT Ä‘á»ƒ tÃ¬m Ã¡nh xáº¡ phÃ¹ há»£p giá»¯a Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng vÃ  Ä‘á»‹a chá»‰ IP riÃªng ban Ä‘áº§u.
- Chuyá»ƒn Ä‘á»•i láº¡i Ä‘á»‹a chá»‰ IP:
    + Router Network Address Translation thay Ä‘á»•i Ä‘á»‹a chá»‰ IP Ä‘Ã­ch tá»« Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng trá»Ÿ láº¡i Ä‘á»‹a chá»‰ IP riÃªng cá»§a thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™.
    + GÃ³i tin sau Ä‘Ã³ Ä‘Æ°á»£c gá»­i Ä‘áº¿n thiáº¿t bá»‹ ban Ä‘áº§u trong máº¡ng ná»™i bá»™.
- Káº¿t thÃºc phiÃªn: Khi phiÃªn káº¿t ná»‘i káº¿t thÃºc, Ã¡nh xáº¡ trong báº£ng NAT sáº½ Ä‘Æ°á»£c xÃ³a hoáº·c thá»i gian sá»­ dá»¥ng Ã¡nh xáº¡ sáº½ háº¿t háº¡n.

VÃ­ dá»¥: Giáº£ sá»­ báº¡n cÃ³ má»™t máº¡ng gia Ä‘Ã¬nh vá»›i nhiá»u thiáº¿t bá»‹ (Ä‘iá»‡n thoáº¡i, mÃ¡y tÃ­nh,â€¦) vÃ  chá»‰ cÃ³ má»™t Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng. Khi báº¡n truy cáº­p vÃ o Google, router sáº½:
    + Thay tháº¿ Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y tÃ­nh báº¡n báº±ng Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng cá»§a router.
    + Gá»­i gÃ³i tin Ä‘áº¿n mÃ¡y chá»§ cá»§a Google.
    + Khi Google tráº£ vá» káº¿t quáº£, router sáº½ nháº­n gÃ³i tin vÃ  gá»­i láº¡i cho mÃ¡y tÃ­nh báº¡n.

## PhÃ¢n loáº¡i NAT
- NAT Ä‘Æ°á»£c phÃ¢n thÃ nh ba loáº¡i chÃ­nh dá»±a trÃªn cÃ¡ch thá»©c Ã¡nh xáº¡ Ä‘á»‹a chá»‰ IP giá»¯a máº¡ng ná»™i bá»™ vÃ  máº¡ng bÃªn ngoÃ i: NAT tÄ©nh, NAT Ä‘á»™ng, vÃ  NAT Overload (PAT). VinaHost sáº½ giá»›i thiá»‡u Ä‘áº¿n báº¡n chi tiáº¿t tá»«ng loáº¡i nhÃ©!

### 3.1. NAT tÄ©nh (Static NAT)
- NAT tÄ©nh Ã¡nh xáº¡ má»™t Ä‘á»‹a chá»‰ IP riÃªng (private IP) cá»‘ Ä‘á»‹nh tá»« máº¡ng ná»™i bá»™ sang má»™t Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng (public IP) cá»‘ Ä‘á»‹nh. ÄÃ¢y lÃ  má»™t Ã¡nh xáº¡ 1:1, cÃ³ nghÄ©a lÃ  má»—i Ä‘á»‹a chá»‰ IP riÃªng luÃ´n tÆ°Æ¡ng á»©ng vá»›i má»™t Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng cá»¥ thá»ƒ.
- Æ¯u Ä‘iá»ƒm: ThÃ­ch há»£p cho cÃ¡c thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™ cáº§n truy cáº­p tá»« bÃªn ngoÃ i vá»›i Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng cá»‘ Ä‘á»‹nh, cháº³ng háº¡n nhÆ° cÃ¡c mÃ¡y chá»§ web hoáº·c mÃ¡y chá»§ email.
- NhÆ°á»£c Ä‘iá»ƒm: KhÃ´ng tiáº¿t kiá»‡m Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng vÃ¬ má»—i thiáº¿t bá»‹ yÃªu cáº§u má»™t Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng riÃªng biá»‡t.

### 3.2. NAT Ä‘á»™ng (Dynamic NAT)
- NAT Ä‘á»™ng Ã¡nh xáº¡ cÃ¡c Ä‘á»‹a chá»‰ IP riÃªng trong máº¡ng ná»™i bá»™ thÃ nh má»™t Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng ngáº«u nhiÃªn tá»« má»™t nhÃ³m (pool) cÃ¡c Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng cÃ³ sáºµn. KhÃ´ng pháº£i lÃºc nÃ o má»™t Ä‘á»‹a chá»‰ IP riÃªng cÅ©ng tÆ°Æ¡ng á»©ng vá»›i má»™t Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng cá»‘ Ä‘á»‹nh, mÃ  phá»¥ thuá»™c vÃ o Ä‘á»‹a chá»‰ IP nÃ o cÃ²n trá»‘ng trong nhÃ³m IP cÃ´ng cá»™ng.
- Æ¯u Ä‘iá»ƒm: Tiáº¿t kiá»‡m Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng hÆ¡n NAT tÄ©nh vÃ¬ khÃ´ng cáº§n Ã¡nh xáº¡ cá»‘ Ä‘á»‹nh.
- NhÆ°á»£c Ä‘iá»ƒm:
    + Äá»‹a chá»‰ IP cÃ´ng cá»™ng thay Ä‘á»•i thÆ°á»ng xuyÃªn, gÃ¢y khÃ³ khÄƒn cho viá»‡c thiáº¿t láº­p cÃ¡c káº¿t ná»‘i tá»« ngoÃ i vÃ o máº¡ng ná»™i bá»™.
    + Háº¡n cháº¿ bá»Ÿi sá»‘ lÆ°á»£ng Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng trong pool.

### 3.3. NAT Overload (PAT)
- NAT Overload, hay cÃ²n gá»i lÃ  PAT, cho phÃ©p nhiá»u thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™ chia sáº» má»™t Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng duy nháº¥t. Thay vÃ¬ Ã¡nh xáº¡ 1:1, PAT sá»­ dá»¥ng cÃ¡c cá»•ng (port) Ä‘á»ƒ phÃ¢n biá»‡t giá»¯a cÃ¡c káº¿t ná»‘i tá»« cÃ¡c thiáº¿t bá»‹ khÃ¡c nhau trong máº¡ng ná»™i bá»™.
- Æ¯u Ä‘iá»ƒm:
    + Tiáº¿t kiá»‡m tá»‘i Ä‘a Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng vÃ¬ nhiá»u thiáº¿t bá»‹ cÃ³ thá»ƒ sá»­ dá»¥ng chung má»™t Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng.
    + LÃ  phÆ°Æ¡ng phÃ¡p phá»• biáº¿n nháº¥t hiá»‡n nay cho cÃ¡c máº¡ng gia Ä‘Ã¬nh vÃ  vÄƒn phÃ²ng nhá».
- NhÆ°á»£c Ä‘iá»ƒm: CÃ³ thá»ƒ dáº«n Ä‘áº¿n viá»‡c táº¯c ngháº½n hoáº·c quÃ¡ táº£i khi cÃ³ quÃ¡ nhiá»u káº¿t ná»‘i tá»« má»™t Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng.
- NAT Overload lÃ  má»™t phiÃªn báº£n má»Ÿ rá»™ng cá»§a NAT Ä‘á»™ng, trong Ä‘Ã³ Ã¡nh xáº¡ khÃ´ng chá»‰ dá»±a trÃªn Ä‘á»‹a chá»‰ IP mÃ  cÃ²n dá»±a trÃªn cÃ¡c cá»•ng Ä‘á»ƒ phÃ¢n biá»‡t nhiá»u káº¿t ná»‘i.

## Æ¯u Ä‘iá»ƒm vÃ  nhÆ°á»£c Ä‘iá»ƒm cá»§a NAT
### 4.1. Æ¯u Ä‘iá»ƒm cá»§a NAT
- Tiáº¿t kiá»‡m Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng: Network Address Translation cho phÃ©p nhiá»u thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™ sá»­ dá»¥ng chung má»™t hoáº·c má»™t sá»‘ Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng, giÃºp giáº£m nhu cáº§u tiÃªu tá»‘n Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng, Ä‘áº·c biá»‡t khi sá»‘ lÆ°á»£ng IPv4 bá»‹ giá»›i háº¡n.
- TÄƒng cÆ°á»ng báº£o máº­t máº¡ng ná»™i bá»™: Network Address Translation che giáº¥u Ä‘á»‹a chá»‰ IP ná»™i bá»™ khá»i internet, lÃ m cho cÃ¡c thiáº¿t bá»‹ bÃªn ngoÃ i khÃ´ng thá»ƒ xÃ¡c Ä‘á»‹nh hoáº·c truy cáº­p trá»±c tiáº¿p vÃ o cÃ¡c thiáº¿t bá»‹ bÃªn trong máº¡ng ná»™i bá»™. Äiá»u nÃ y giÃºp báº£o vá»‡ máº¡ng ná»™i bá»™ khá»i cÃ¡c cuá»™c táº¥n cÃ´ng tá»« bÃªn ngoÃ i.
- Linh hoáº¡t trong viá»‡c Ä‘á»•i Ä‘á»‹a chá»‰ IP: NAT cho phÃ©p thay Ä‘á»•i cáº¥u trÃºc Ä‘á»‹a chá»‰ IP bÃªn trong máº¡ng ná»™i bá»™ mÃ  khÃ´ng cáº§n thÃ´ng bÃ¡o hoáº·c thay Ä‘á»•i cáº¥u hÃ¬nh cá»§a cÃ¡c thiáº¿t bá»‹ bÃªn ngoÃ i.
- Há»— trá»£ nhiá»u thiáº¿t bá»‹ cÃ¹ng truy cáº­p internet: Vá»›i NAT Overload (PAT), nhiá»u thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™ cÃ³ thá»ƒ chia sáº» má»™t Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng duy nháº¥t, táº¡o Ä‘iá»u kiá»‡n cho viá»‡c truy cáº­p internet mÃ  khÃ´ng cáº§n nhiá»u Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng.
- Giáº£m chi phÃ­ ISP: Viá»‡c chá»‰ cáº§n má»™t vÃ i Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng thay vÃ¬ pháº£i mua nhiá»u Ä‘á»‹a chá»‰ tá»« nhÃ  cung cáº¥p dá»‹ch vá»¥ (ISP) giÃºp tiáº¿t kiá»‡m chi phÃ­.
### 4.2. NhÆ°á»£c Ä‘iá»ƒm cá»§a NAT
- Giáº£m hiá»‡u suáº¥t káº¿t ná»‘i: QuÃ¡ trÃ¬nh chuyá»ƒn Ä‘á»•i Ä‘á»‹a chá»‰ IP vÃ  cá»•ng qua NAT cÃ³ thá»ƒ táº¡o thÃªm Ä‘á»™ trá»… (latency) vÃ  lÃ m giáº£m hiá»‡u suáº¥t káº¿t ná»‘i máº¡ng, Ä‘áº·c biá»‡t lÃ  khi cÃ³ quÃ¡ nhiá»u thiáº¿t bá»‹ chia sáº» má»™t Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng.
KhÃ³ khÄƒn trong viá»‡c thiáº¿t láº­p káº¿t ná»‘i tá»« ngoÃ i vÃ o máº¡ng ná»™i bá»™: CÃ¡c dá»‹ch vá»¥ yÃªu cáº§u káº¿t ná»‘i tá»« internet vÃ o thiáº¿t bá»‹ bÃªn trong máº¡ng ná»™i bá»™ (vÃ­ dá»¥: mÃ¡y chá»§ web hoáº·c mÃ¡y chá»§ trÃ² chÆ¡i) cÃ³ thá»ƒ gáº·p khÃ³ khÄƒn trong viá»‡c cáº¥u hÃ¬nh vÃ  hoáº¡t Ä‘á»™ng do NAT khÃ´ng cho phÃ©p truy cáº­p trá»±c tiáº¿p.
- Váº¥n Ä‘á» vá»›i má»™t sá»‘ giao thá»©c: Má»™t sá»‘ giao thá»©c máº¡ng, nhÆ° SIP (Session Initiation Protocol) vÃ  IPSec, cÃ³ thá»ƒ gáº·p khÃ³ khÄƒn trong viá»‡c hoáº¡t Ä‘á»™ng qua Network Address Translation vÃ¬ cÃ¡c váº¥n Ä‘á» liÃªn quan Ä‘áº¿n viá»‡c thay Ä‘á»•i Ä‘á»‹a chá»‰ vÃ  cá»•ng.
- TÄƒng Ä‘á»™ phá»©c táº¡p trong cáº¥u hÃ¬nh: Äá»ƒ cÃ¡c dá»‹ch vá»¥ yÃªu cáº§u truy cáº­p tá»« bÃªn ngoÃ i hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c, cáº§n cáº¥u hÃ¬nh cáº©n tháº­n NAT tÄ©nh, NAT Ä‘á»™ng hoáº·c Port Forwarding, Ä‘iá»u nÃ y cÃ³ thá»ƒ phá»©c táº¡p Ä‘á»‘i vá»›i ngÆ°á»i dÃ¹ng khÃ´ng quen thuá»™c.
- KhÃ´ng tÆ°Æ¡ng thÃ­ch vá»›i IPv6: Network Address Translation chá»§ yáº¿u Ä‘Æ°á»£c sá»­ dá»¥ng cho Ä‘á»‹a chá»‰ IPv4, trong khi IPv6 cÃ³ thá»ƒ khÃ´ng cáº§n Ä‘áº¿n Network Address Translation do cÃ³ sá»‘ lÆ°á»£ng Ä‘á»‹a chá»‰ IP lá»›n hÆ¡n. Äiá»u nÃ y cÃ³ thá»ƒ lÃ m cho NAT trá»Ÿ nÃªn kÃ©m cáº§n thiáº¿t trong cÃ¡c máº¡ng sá»­ dá»¥ng IPv6.

### 4.2. NhÆ°á»£c Ä‘iá»ƒm cá»§a NAT
- Giáº£m hiá»‡u suáº¥t káº¿t ná»‘i: QuÃ¡ trÃ¬nh chuyá»ƒn Ä‘á»•i Ä‘á»‹a chá»‰ IP vÃ  cá»•ng qua NAT cÃ³ thá»ƒ táº¡o thÃªm Ä‘á»™ trá»… (latency) vÃ  lÃ m giáº£m hiá»‡u suáº¥t káº¿t ná»‘i máº¡ng, Ä‘áº·c biá»‡t lÃ  khi cÃ³ quÃ¡ nhiá»u thiáº¿t bá»‹ chia sáº» má»™t Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng.
KhÃ³ khÄƒn trong viá»‡c thiáº¿t láº­p káº¿t ná»‘i tá»« ngoÃ i vÃ o máº¡ng ná»™i bá»™: CÃ¡c dá»‹ch vá»¥ yÃªu cáº§u káº¿t ná»‘i tá»« internet vÃ o thiáº¿t bá»‹ bÃªn trong máº¡ng ná»™i bá»™ (vÃ­ dá»¥: mÃ¡y chá»§ web hoáº·c mÃ¡y chá»§ trÃ² chÆ¡i) cÃ³ thá»ƒ gáº·p khÃ³ khÄƒn trong viá»‡c cáº¥u hÃ¬nh vÃ  hoáº¡t Ä‘á»™ng do NAT khÃ´ng cho phÃ©p truy cáº­p trá»±c tiáº¿p.
- Váº¥n Ä‘á» vá»›i má»™t sá»‘ giao thá»©c: Má»™t sá»‘ giao thá»©c máº¡ng, nhÆ° SIP (Session Initiation Protocol) vÃ  IPSec, cÃ³ thá»ƒ gáº·p khÃ³ khÄƒn trong viá»‡c hoáº¡t Ä‘á»™ng qua Network Address Translation vÃ¬ cÃ¡c váº¥n Ä‘á» liÃªn quan Ä‘áº¿n viá»‡c thay Ä‘á»•i Ä‘á»‹a chá»‰ vÃ  cá»•ng.
- TÄƒng Ä‘á»™ phá»©c táº¡p trong cáº¥u hÃ¬nh: Äá»ƒ cÃ¡c dá»‹ch vá»¥ yÃªu cáº§u truy cáº­p tá»« bÃªn ngoÃ i hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c, cáº§n cáº¥u hÃ¬nh cáº©n tháº­n NAT tÄ©nh, NAT Ä‘á»™ng hoáº·c Port Forwarding, Ä‘iá»u nÃ y cÃ³ thá»ƒ phá»©c táº¡p Ä‘á»‘i vá»›i ngÆ°á»i dÃ¹ng khÃ´ng quen thuá»™c.
- KhÃ´ng tÆ°Æ¡ng thÃ­ch vá»›i IPv6: Network Address Translation chá»§ yáº¿u Ä‘Æ°á»£c sá»­ dá»¥ng cho Ä‘á»‹a chá»‰ IPv4, trong khi IPv6 cÃ³ thá»ƒ khÃ´ng cáº§n Ä‘áº¿n Network Address Translation do cÃ³ sá»‘ lÆ°á»£ng Ä‘á»‹a chá»‰ IP lá»›n hÆ¡n. Äiá»u nÃ y cÃ³ thá»ƒ lÃ m cho NAT trá»Ÿ nÃªn kÃ©m cáº§n thiáº¿t trong cÃ¡c máº¡ng sá»­ dá»¥ng IPv6.

### 5. TÃ¬m hiá»ƒu vá» Ä‘á»‹a chá»‰ IP Public vÃ  IP Private
- NAT cho phÃ©p hÃ ng trÄƒm hoáº·c tháº­m chÃ­ hÃ ng nghÃ¬n thiáº¿t bá»‹ ná»™i bá»™ chia sáº» má»™t hoáº·c vÃ i Ä‘á»‹a chá»‰ IP cÃ´ng khai, giÃºp tiáº¿t kiá»‡m tÃ i nguyÃªn Ä‘á»‹a chá»‰ IP.
###  IP Public lÃ  gÃ¬?
- IP Public (Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng) lÃ  má»™t Ä‘á»‹a chá»‰ IP Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘á»‹nh danh má»™t thiáº¿t bá»‹ trÃªn máº¡ng internet. ÄÃ¢y lÃ  Ä‘á»‹a chá»‰ duy nháº¥t mÃ  cÃ¡c thiáº¿t bá»‹, mÃ¡y chá»§, hoáº·c há»‡ thá»‘ng máº¡ng cÃ³ thá»ƒ sá»­ dá»¥ng Ä‘á»ƒ giao tiáº¿p vá»›i cÃ¡c thiáº¿t bá»‹ khÃ¡c trÃªn internet.
- CÃ¡c nhÃ  cung cáº¥p dá»‹ch vá»¥ internet (ISP) cung cáº¥p Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng cho cÃ¡c thiáº¿t bá»‹ hoáº·c máº¡ng ná»™i bá»™ Ä‘á»ƒ cÃ³ thá»ƒ truy cáº­p internet.
 - Äáº·c Ä‘iá»ƒm cá»§a IP Public:
    + Duy nháº¥t trÃªn toÃ n cáº§u: Má»—i Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng lÃ  duy nháº¥t trÃªn toÃ n cáº§u vÃ  khÃ´ng thá»ƒ trÃ¹ng láº·p. NÃ³ cho phÃ©p cÃ¡c thiáº¿t bá»‹ truy cáº­p vÃ  liÃªn láº¡c trá»±c tiáº¿p vá»›i cÃ¡c thiáº¿t bá»‹ khÃ¡c trÃªn máº¡ng internet.
    + Giao tiáº¿p trá»±c tiáº¿p vá»›i internet: CÃ¡c thiáº¿t bá»‹ cÃ³ Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng cÃ³ thá»ƒ gá»­i vÃ  nháº­n dá»¯ liá»‡u trá»±c tiáº¿p tá»« internet mÃ  khÃ´ng cáº§n thÃ´ng qua quÃ¡ trÃ¬nh chuyá»ƒn Ä‘á»•i Ä‘á»‹a chá»‰ IP (nhÆ° NAT).
    + PhÃ¢n bá»• bá»Ÿi ISP: IP cÃ´ng cá»™ng thÆ°á»ng Ä‘Æ°á»£c nhÃ  cung cáº¥p dá»‹ch vá»¥ internet (ISP) cáº¥p cho cÃ¡c máº¡ng gia Ä‘Ã¬nh hoáº·c doanh nghiá»‡p. Äá»‹a chá»‰ nÃ y cÃ³ thá»ƒ lÃ  tÄ©nh (Static IP) hoáº·c Ä‘á»™ng (Dynamic IP) tÃ¹y vÃ o cÃ¡ch thiáº¿t láº­p cá»§a ISP.
    + Táº§m nhÃ¬n cÃ´ng khai: VÃ¬ Ä‘á»‹a chá»‰ IP cÃ´ng cá»™ng cÃ³ thá»ƒ Ä‘Æ°á»£c nhÃ¬n tháº¥y tá»« báº¥t ká»³ thiáº¿t bá»‹ nÃ o trÃªn internet, nÃ³ cÃ³ thá»ƒ bá»‹ cÃ¡c tÃ¡c nhÃ¢n Ä‘á»™c háº¡i hoáº·c táº¥n cÃ´ng máº¡ng nháº¯m Ä‘áº¿n. Äiá»u nÃ y Ä‘Ã²i há»i pháº£i cÃ³ biá»‡n phÃ¡p báº£o máº­t nhÆ° tÆ°á»ng lá»­a hoáº·c VPN.

### IP Private lÃ  gÃ¬?
- IP Private (Ä‘á»‹a chá»‰ IP riÃªng) lÃ  Ä‘á»‹a chá»‰ IP Ä‘Æ°á»£c sá»­ dá»¥ng trong cÃ¡c máº¡ng ná»™i bá»™ (LAN) nhÆ° nhÃ  riÃªng, doanh nghiá»‡p, hoáº·c cÃ¡c tá»• chá»©c, vÃ  khÃ´ng thá»ƒ truy cáº­p trá»±c tiáº¿p tá»« internet. Äá»‹a chá»‰ IP Private chá»‰ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ giao tiáº¿p giá»¯a cÃ¡c thiáº¿t bá»‹ trong cÃ¹ng má»™t máº¡ng ná»™i bá»™.
- Äáº·c Ä‘iá»ƒm cá»§a IP Private:
    + KhÃ´ng Ä‘á»‹nh danh trÃªn internet: Äá»‹a chá»‰ IP Private chá»‰ cÃ³ hiá»‡u lá»±c trong pháº¡m vi máº¡ng ná»™i bá»™ vÃ  khÃ´ng Ä‘Æ°á»£c Ä‘á»‹nh danh hoáº·c truy cáº­p tá»« bÃªn ngoÃ i máº¡ng ná»™i bá»™ (tá»©c lÃ  khÃ´ng káº¿t ná»‘i trá»±c tiáº¿p vá»›i internet).
    + DÃ¹ng trong cÃ¡c máº¡ng ná»™i bá»™: CÃ¡c thiáº¿t bá»‹ nhÆ° mÃ¡y tÃ­nh, mÃ¡y in, hoáº·c Ä‘iá»‡n thoáº¡i thÃ´ng minh trong má»™t máº¡ng LAN sá»­ dá»¥ng IP Private Ä‘á»ƒ giao tiáº¿p vá»›i nhau. Äá»ƒ cÃ¡c thiáº¿t bá»‹ nÃ y káº¿t ná»‘i vá»›i internet, thÆ°á»ng pháº£i thÃ´ng qua má»™t thiáº¿t bá»‹ cÃ³ IP Public, nhÆ° router hoáº·c modem cÃ³ cÃ i Ä‘áº·t NAT.
    + PhÃ¢n bá»• cá»‘ Ä‘á»‹nh: IP Private khÃ´ng Ä‘Æ°á»£c cÃ¡c nhÃ  cung cáº¥p dá»‹ch vá»¥ internet (ISP) cáº¥p phÃ¡t mÃ  thÆ°á»ng Ä‘Æ°á»£c gÃ¡n tá»± Ä‘á»™ng hoáº·c thá»§ cÃ´ng bá»Ÿi router hoáº·c quáº£n trá»‹ máº¡ng ná»™i bá»™.
    + Tiáº¿t kiá»‡m Ä‘á»‹a chá»‰ IP Public: VÃ¬ IP Private khÃ´ng cáº§n pháº£i lÃ  duy nháº¥t trÃªn toÃ n cáº§u, nÃªn nhiá»u máº¡ng khÃ¡c nhau cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¹ng má»™t dáº£i IP Private mÃ  khÃ´ng gÃ¢y xung Ä‘á»™t.

### Chá»©c nÄƒng chÃ­nh cá»§a NAT
- Chá»©c nÄƒng chÃ­nh cá»§a Network Address Translation lÃ  chuyá»ƒn Ä‘á»•i Ä‘á»‹a chá»‰ IP giá»¯a máº¡ng ná»™i bá»™ vÃ  máº¡ng bÃªn ngoÃ i (internet), cá»¥ thá»ƒ lÃ  Ã¡nh xáº¡ cÃ¡c Ä‘á»‹a chá»‰ IP Private trong máº¡ng ná»™i bá»™ thÃ nh Ä‘á»‹a chá»‰ IP Public khi truy cáº­p internet, vÃ  ngÆ°á»£c láº¡i. Äiá»u nÃ y cho phÃ©p cÃ¡c thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™ cÃ³ thá»ƒ truy cáº­p internet thÃ´ng qua má»™t hoáº·c má»™t sá»‘ Ä‘á»‹a chá»‰ IP Public.
- Sau Ä‘Ã¢y lÃ  cÃ¡c chá»©c nÄƒng quan trá»ng nháº¥t cá»§a Network Address Translation:
    + Chia sáº» Ä‘á»‹a chá»‰ IP Public: NAT cho phÃ©p nhiá»u thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™ (sá»­ dá»¥ng Ä‘á»‹a chá»‰ IP Private) chia sáº» má»™t hoáº·c má»™t sá»‘ Ä‘á»‹a chá»‰ IP Public Ä‘á»ƒ truy cáº­p internet. Äiá»u nÃ y ráº¥t quan trá»ng khi sá»‘ lÆ°á»£ng Ä‘á»‹a chá»‰ IP Public cÃ³ háº¡n trong IPv4.
- TÄƒng cÆ°á»ng báº£o máº­t: NAT che giáº¥u Ä‘á»‹a chá»‰ IP Private cá»§a cÃ¡c thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™ khá»i internet, giÃºp báº£o vá»‡ máº¡ng khá»i cÃ¡c cuá»™c táº¥n cÃ´ng bÃªn ngoÃ i. Thiáº¿t bá»‹ tá»« ngoÃ i internet khÃ´ng thá»ƒ káº¿t ná»‘i trá»±c tiáº¿p vá»›i cÃ¡c thiáº¿t bá»‹ cÃ³ IP Private mÃ  khÃ´ng qua Network Address Translation.
- Giáº£m bá»›t nhu cáº§u sá»­ dá»¥ng Ä‘á»‹a chá»‰ IP Public: Báº±ng cÃ¡ch sá»­ dá»¥ng má»™t hoáº·c má»™t vÃ i Ä‘á»‹a chá»‰ IP Public cho hÃ ng trÄƒm hoáº·c hÃ ng nghÃ¬n thiáº¿t bá»‹ cÃ³ IP Private, NAT giÃºp tiáº¿t kiá»‡m Ä‘Ã¡ng ká»ƒ tÃ i nguyÃªn Ä‘á»‹a chá»‰ IP Public.
- Dá»… dÃ ng cáº¥u hÃ¬nh máº¡ng ná»™i bá»™: Network Address Translation cho phÃ©p thay Ä‘á»•i, cáº¥u trÃºc láº¡i Ä‘á»‹a chá»‰ IP Private trong máº¡ng ná»™i bá»™ mÃ  khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n Ä‘á»‹a chá»‰ IP Public. Äiá»u nÃ y táº¡o ra sá»± linh hoáº¡t trong viá»‡c quáº£n lÃ½ vÃ  tá»• chá»©c máº¡ng ná»™i bá»™.
- Há»— trá»£ káº¿t ná»‘i tá»« máº¡ng ná»™i bá»™ ra ngoÃ i internet: Khi má»™t thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™ muá»‘n truy cáº­p internet, Network Address Translation sáº½ Ã¡nh xáº¡ Ä‘á»‹a chá»‰ IP Private thÃ nh Ä‘á»‹a chá»‰ IP Public. Äiá»u nÃ y cho phÃ©p cÃ¡c thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™ cÃ³ thá»ƒ duy trÃ¬ káº¿t ná»‘i vá»›i cÃ¡c dá»‹ch vá»¥ vÃ  há»‡ thá»‘ng trÃªn internet.

### VÃ¬ sao nÃªn sá»­ dá»¥ng NAT?
- Nguá»“n Ä‘á»‹a chá»‰ IPv4 bá»‹ giá»›i háº¡n: Sá»‘ lÆ°á»£ng Ä‘á»‹a chá»‰ IPv4 Public lÃ  há»¯u háº¡n, nhÆ°ng sá»‘ lÆ°á»£ng thiáº¿t bá»‹ káº¿t ná»‘i internet ngÃ y cÃ ng tÄƒng. NAT giÃºp nhiá»u thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™ chia sáº» cÃ¹ng má»™t Ä‘á»‹a chá»‰ IP Public, giáº£m nhu cáº§u sá»­ dá»¥ng Ä‘á»‹a chá»‰ IP Public.
- Giáº£i phÃ¡p táº¡m thá»i cho váº¥n Ä‘á» cáº¡n kiá»‡t IPv4: DÃ¹ IPv6 Ä‘Ã£ ra Ä‘á»i vá»›i sá»‘ lÆ°á»£ng Ä‘á»‹a chá»‰ IP ráº¥t lá»›n, nhÆ°ng viá»‡c triá»ƒn khai cÃ²n háº¡n cháº¿. NAT cung cáº¥p má»™t giáº£i phÃ¡p táº¡m thá»i hiá»‡u quáº£ Ä‘á»ƒ tá»‘i Æ°u hÃ³a viá»‡c sá»­ dá»¥ng Ä‘á»‹a chá»‰ IPv4 Public.
- Che giáº¥u Ä‘á»‹a chá»‰ IP Private: NAT ngÄƒn khÃ´ng cho cÃ¡c thiáº¿t bá»‹ bÃªn ngoÃ i trá»±c tiáº¿p truy cáº­p vÃ o cÃ¡c thiáº¿t bá»‹ trong máº¡ng ná»™i bá»™, giÃºp báº£o vá»‡ máº¡ng khá»i cÃ¡c cuá»™c táº¥n cÃ´ng tá»« bÃªn ngoÃ i. Äiá»u nÃ y táº¡o ra má»™t lá»›p báº£o máº­t cho máº¡ng ná»™i bá»™.
- TÆ°á»ng lá»­a tÃ­ch há»£p vá»›i NAT: Nhiá»u router hiá»‡n nay cÃ³ chá»©c nÄƒng NAT káº¿t há»£p vá»›i tÆ°á»ng lá»­a, cung cáº¥p thÃªm má»™t lá»›p báº£o vá»‡ báº±ng cÃ¡ch lá»c vÃ  quáº£n lÃ½ lÆ°u lÆ°á»£ng truy cáº­p.
- Linh hoáº¡t trong cáº¥u hÃ¬nh Ä‘á»‹a chá»‰ IP: Sá»­ dá»¥ng NAT cho phÃ©p báº¡n thay Ä‘á»•i Ä‘á»‹a chá»‰ IP Private bÃªn trong máº¡ng mÃ  khÃ´ng cáº§n pháº£i Ä‘iá»u chá»‰nh há»‡ thá»‘ng Ä‘á»‹a chá»‰ IP Public hoáº·c áº£nh hÆ°á»Ÿng Ä‘áº¿n káº¿t ná»‘i internet. Äiá»u nÃ y giÃºp quáº£n lÃ½ máº¡ng trá»Ÿ nÃªn dá»… dÃ ng hÆ¡n, Ä‘áº·c biá»‡t trong cÃ¡c tá»• chá»©c lá»›n.
- Dá»… dÃ ng má»Ÿ rá»™ng máº¡ng: Khi cáº§n thÃªm thiáº¿t bá»‹ má»›i vÃ o máº¡ng ná»™i bá»™, báº¡n khÃ´ng cáº§n mua thÃªm Ä‘á»‹a chá»‰ IP Public, chá»‰ cáº§n sá»­ dá»¥ng NAT Ä‘á»ƒ tiáº¿p tá»¥c chia sáº» Ä‘á»‹a chá»‰ IP Public hiá»‡n cÃ³.
- Chia sáº» káº¿t ná»‘i internet dá»… dÃ ng: Vá»›i NAT, nhiá»u thiáº¿t bá»‹ cÃ³ thá»ƒ cÃ¹ng lÃºc truy cáº­p internet thÃ´ng qua má»™t káº¿t ná»‘i duy nháº¥t, giÃºp tiáº¿t kiá»‡m chi phÃ­ vÃ  Ä‘Æ¡n giáº£n hÃ³a viá»‡c triá»ƒn khai network.
- Há»— trá»£ káº¿t ná»‘i tá»« xa: CÃ³ thá»ƒ cáº¥u hÃ¬nh NAT Ä‘á»ƒ cho phÃ©p truy cáº­p tá»« xa vÃ o cÃ¡c thiáº¿t bá»‹ ná»™i bá»™ má»™t cÃ¡ch an toÃ n, báº±ng cÃ¡ch sá»­ dá»¥ng cÃ¡c ká»¹ thuáº­t nhÆ° Port Forwarding.
- Há»— trá»£ tá»‘t cho cÃ¡c thiáº¿t bá»‹ chá»‰ há»— trá»£ IPv4: Máº·c dÃ¹ IPv6 Ä‘ang dáº§n Ä‘Æ°á»£c triá»ƒn khai, nhiá»u thiáº¿t bá»‹ váº«n chá»‰ há»— trá»£ IPv4. NAT giÃºp nhá»¯ng thiáº¿t bá»‹ nÃ y tiáº¿p tá»¥c hoáº¡t Ä‘á»™ng vÃ  káº¿t ná»‘i vá»›i internet mÃ  khÃ´ng cáº§n nÃ¢ng cáº¥p ngay láº­p tá»©c.

# TÃ¬m hiá»ƒu cÆ¡ cháº¿ hoáº¡t Ä‘á»™ng, cÃ¡ch cáº¥u hÃ¬nh iptables
- IPtables lÃ  má»™t chÆ°Æ¡ng trÃ¬nh Firewall â€“ TÆ°á»ng lá»­a miá»…n phÃ­. ChÆ°Æ¡ng trÃ¬nh nÃ y Ä‘Æ°á»£c phÃ¡t triá»ƒn chá»§ yáº¿u dÃ nh cho há»‡ Ä‘iá»u hÃ nh Linux, cho phÃ©p há»‡ Ä‘iá»u hÃ nh thiáº¿t láº­p cÃ¡c quy táº¯c riÃªng Ä‘á»ƒ kiá»ƒm soÃ¡t truy cáº­p vÃ  tÄƒng cÆ°á»ng tÃ­nh báº£o máº­t cho cÃ¡c há»‡ thá»‘ng nhÆ° VPS, Hosting hay Server.

- Khi tiáº¿n hÃ nh sá»­ dá»¥ng mÃ¡y chá»§, cÃ´ng cá»¥ nÃ y thá»±c hiá»‡n tá»‘t nhiá»‡m vá»¥ ngÄƒn cháº·n cÃ¡c truy cáº­p khÃ´ng há»£p lá»‡ thÃ´ng qua viá»‡c sá»­ dá»¥ng Netfilter. IPtables/Netfilter bao gá»“m hai thÃ nh pháº§n chÃ­nh: pháº§n Netfilter Ä‘Æ°á»£c tÃ­ch há»£p trong nhÃ¢n Linux vÃ  pháº§n cÃ²n láº¡i lÃ  IPtables á»Ÿ bÃªn ngoÃ i. VÃ¬ tháº¿, chÆ°Æ¡ng trÃ¬nh nÃ y Ä‘Ã³ng vai trÃ² lÃ  há»‡ thá»‘ng giao tiáº¿p vá»›i ngÆ°á»i dÃ¹ng, Ä‘á»“ng thá»i Ä‘Æ°a cÃ¡c quy táº¯c cá»§a ngÆ°á»i dÃ¹ng vÃ o Netfilter Ä‘á»ƒ xá»­ lÃ½.  
- Netfilter Ä‘áº£m nháº­n nhiá»‡m vá»¥ lá»c cÃ¡c gÃ³i dá»¯ liá»‡u á»Ÿ má»©c IP, vÃ  hoáº¡t Ä‘á»™ng trá»±c tiáº¿p trong nhÃ¢n Linux, giÃºp tÄƒng hiá»‡u suáº¥t vÃ  giáº£m táº£i cho há»‡ thá»‘ng. IPtables Ä‘Ã³ng vai trÃ² lÃ  giao diá»‡n cho Netfilter, vÃ  cáº£ hai thÃ nh pháº§n nÃ y cÃ³ nhiá»‡m vá»¥ tÆ°Æ¡ng tá»± nhau. TÆ°á»ng lá»­a quyáº¿t Ä‘á»‹nh xem cÃ¡c gÃ³i tin nÃ o Ä‘Æ°á»£c phÃ©p Ä‘i vÃ o hoáº·c ra khá»i há»‡ thá»‘ng, vÃ  viá»‡c quyáº¿t Ä‘á»‹nh cá»•ng nÃ o cÃ³ thá»ƒ káº¿t ná»‘i tá»« bÃªn ngoÃ i lÃ  má»™t pháº§n chá»©c nÄƒng cá»§a tÆ°á»ng lá»­a. 


# ip link â€“ Quáº£n lÃ½ tráº¡ng thÃ¡i cá»§a interface máº¡ng

```bash
ip link show            # Hiá»ƒn thá»‹ táº¥t cáº£ interface
ip link set eth0 up     # Báº­t interface eth0
ip link set eth0 down   # Táº¯t interface eth0
```

# ip route â€“ Kiá»ƒm tra báº£ng Ä‘á»‹nh tuyáº¿n

```bash
ip route show           # Hiá»ƒn thá»‹ báº£ng Ä‘á»‹nh tuyáº¿n hiá»‡n táº¡i
ip route add default via 192.168.1.1 dev eth0  # ThÃªm default gateway
ip route del default                          # XÃ³a default gateway
```

# ip address â€“ Quáº£n lÃ½ Ä‘á»‹a chá»‰ IP

```bash
ip addr show           # Xem Ä‘á»‹a chá»‰ IP cá»§a táº¥t cáº£ interface
ip addr add 192.168.1.100/24 dev eth0  # GÃ¡n IP cho interface eth0
ip addr del 192.168.1.100/24 dev eth0  # XÃ³a IP khá»i interface eth0
```

# traceroute â€“ Kiá»ƒm tra Ä‘Æ°á»ng Ä‘i cá»§a gÃ³i tin

```bash
traceroute google.com  # Xem cÃ¡c bÆ°á»›c trung gian khi gá»­i gÃ³i tin tá»›i Google
```

